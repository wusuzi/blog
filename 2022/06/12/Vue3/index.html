<!DOCTYPE html><html lang="zh-CN" theme-mode="dark-only"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Vue3 | Wusu</title><link rel="icon" type="image/x-icon" href="https://ak.hypergryph.com/favicon.ico"><script>var config = {"root":"/","search":{"preload":false,"activeHolder":"Enter here","blurHolder":"Search","noResult":"Data \"$0\" not found"},"code":{"codeInfo":"$0 - $1 lines","copy":"code.copy","copyFinish":"code.copyFinish","expand":"code.expand"}}</script><script src="//unpkg.com/mermaid@9.2.2/dist/mermaid.min.js"></script><link type="text/css" rel="stylesheet" href="//unpkg.com/lightgallery@2.7.1/css/lightgallery.css"><link type="text/css" rel="stylesheet" href="//unpkg.com/lightgallery@2.7.1/css/lg-zoom.css"><link type="text/css" rel="stylesheet" href="//unpkg.com/lightgallery@2.7.1/css/lg-thumbnail.css"><link type="text/css" rel="stylesheet" href="/lib/fontawesome/css/all.min.css"><link rel="stylesheet" href="/css/arknights.css"><link rel="stylesheet" href="//unpkg.com/@highlightjs/cdn-assets@11.6.0/styles/atom-one-dark-reasonable.min.css"><script>if (window.localStorage.getItem('theme-mode') === 'light')
 document.documentElement.setAttribute('theme-mode', 'light')
if (window.localStorage.getItem('theme-mode') === 'dark')
 document.documentElement.setAttribute('theme-mode', 'dark')</script><style>@font-face {
 font-family: Bender;
 src: local('Bender'), url("/font/Bender.ttf"), url("/font/Bender.otf");
}
@font-face {
 font-family: BenderLight;
 src: local('BenderLight'), url("/font/BenderLight.ttf");
}
@font-face {
 font-family: 'JetBrains Mono';
 src: local('JetBrains Mono'), url('/font/JetBrainsMono-Regular.woff2') format('woff2');
}</style><style>:root {
  --dark-background: url('https://ak.hypergryph.com/assets/index/images/ak/pc/bk.jpg');
  --light-background: url('/img/bk.jpg');
}</style><meta name="generator" content="Hexo 6.3.0"></head><body><main><header class="closed"><div class="navBtn"><i class="navBtnIcon"><span class="navBtnIconBar"></span><span class="navBtnIconBar"></span><span class="navBtnIconBar"></span></i></div><nav><div class="navItem" id="search-header"><span class="navItemTitle"><input autocomplete="off" autocorrect="off" autocapitalize="none" placeholder="Search" spellcheck="false" maxlength="50" type="text" id="search-input"></span></div><div class="navItem" id="search-holder"></div><div class="search-popup"><div id="search-result"></div></div><ol class="navContent"><li class="navItem"><a class="navBlock" href="/"><span class="navItemTitle">Home</span></a></li><li class="navItem" matchdata="categories,tags"><a class="navBlock" href="/archives/"><span class="navItemTitle">Archives</span></a></li><li class="navItem"><a class="navBlock" href="/mySelf/"><span class="navItemTitle">Best Of My Love</span></a></li></ol></nav></header><article><div id="post-bg"><div id="post-title"><h1>Vue3</h1><div id="post-info"><span>First Post: <div class="control"><time datetime="2022-06-11T16:00:00.000Z" id="date"> 2022-06-12</time></div></span><br><span>Last Update: <div class="control"><time datetime="2023-09-07T06:03:25.287Z" id="updated"> 2023-09-07</time></div></span></div></div><hr><div id="post-content"><p>他日若有凌云志<br>vue3 初见</p>
<span id="more"></span>
<p>Tips：斜体下划线 &#x3D;&gt; 重点</p>
<h3 id="Vue3-EventBus-mitt-事件总线"><a href="#Vue3-EventBus-mitt-事件总线" class="headerlink" title="Vue3 EventBus mitt 事件总线"></a>Vue3 EventBus mitt 事件总线</h3><h4 id="下载"><a href="#下载" class="headerlink" title="下载"></a>下载</h4><p>npm i mitt </p>
<h4 id="导入："><a href="#导入：" class="headerlink" title="导入："></a>导入：</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// EventBus.js</span><br><br><span class="hljs-keyword">import</span> mitt <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;mitt&quot;</span><br><br><span class="hljs-comment">// mitt Vue3 官方推荐的事件总线处理程序</span><br><br><span class="hljs-keyword">const</span> emitter  = <span class="hljs-title function_">mitt</span>()<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">emitter</span>()<br></code></pre></td></tr></table></figure>

<h4 id="使用"><a href="#使用" class="headerlink" title="使用:"></a>使用:</h4><h5 id="绑定"><a href="#绑定" class="headerlink" title="绑定"></a>绑定</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> emitter <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;EventBus.js&quot;</span><br><br>emitter.<span class="hljs-title function_">emit</span>(<span class="hljs-string">&quot;why&quot;</span>,&#123;<span class="hljs-attr">name</span>:<span class="hljs-string">&quot;wusu&quot;</span>,<span class="hljs-attr">age</span>:<span class="hljs-string">&quot;19&quot;</span>&#125;)<br></code></pre></td></tr></table></figure>

<h5 id="触发"><a href="#触发" class="headerlink" title="触发"></a>触发</h5><p>且可以正常触发methods里的方法</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> emitter <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;eventBus.js&quot;</span><br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;<br>    <span class="hljs-title function_">created</span>(<span class="hljs-params"></span>) &#123;<br>      <span class="hljs-comment">// 监听 why </span><br>      emitter.<span class="hljs-title function_">on</span>(<span class="hljs-string">&quot;why&quot;</span>,<span class="hljs-variable language_">this</span>.<span class="hljs-property">Dialog</span>);<br><br>      emitter.<span class="hljs-title function_">on</span>(<span class="hljs-string">&quot;kobe&quot;</span>, <span class="hljs-function">(<span class="hljs-params">info</span>) =&gt;</span> &#123;<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;kobe:&quot;</span>, info);<br>      &#125;);<br><br>      <span class="hljs-comment">// 监听全部 每次触发其他时都会触发</span><br>      emitter.<span class="hljs-title function_">on</span>(<span class="hljs-string">&quot;*&quot;</span>, <span class="hljs-function">(<span class="hljs-params">type, info</span>) =&gt;</span> &#123;<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;* listener:&quot;</span>, type, info + <span class="hljs-string">&#x27;1&#x27;</span>);<br>      &#125;)<br>    &#125;,<br>     <span class="hljs-attr">methods</span>:&#123;<br>      <span class="hljs-title class_">Dialog</span>(e)&#123;<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(e) <span class="hljs-comment">// &#123;name: &#x27;why&#x27;, age: 18&#125;</span><br>      &#125;<br>    &#125;<br>  &#125;<br></code></pre></td></tr></table></figure>

<h5 id="取消监听"><a href="#取消监听" class="headerlink" title="取消监听"></a>取消监听</h5><p>取消全部</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs javascript">emitter.<span class="hljs-property">all</span>.<span class="hljs-title function_">clear</span>()<br></code></pre></td></tr></table></figure>

<p>取消单个</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// 绑定</span><br>emitter.<span class="hljs-title function_">on</span>(<span class="hljs-string">&quot;why&quot;</span>,<span class="hljs-variable language_">this</span>.<span class="hljs-property">Dialog</span>);<br><span class="hljs-comment">// 取消</span><br>emitter.<span class="hljs-title function_">off</span>(<span class="hljs-string">&#x27;why&#x27;</span>,<span class="hljs-variable language_">this</span>.<span class="hljs-property">Dialog</span>)<br></code></pre></td></tr></table></figure>

<h3 id="Slot"><a href="#Slot" class="headerlink" title="Slot"></a>Slot</h3><h4 id="使用-1"><a href="#使用-1" class="headerlink" title="使用:"></a>使用:</h4><h5 id="基本使用："><a href="#基本使用：" class="headerlink" title="基本使用："></a>基本使用：</h5><h6 id="匿名插槽"><a href="#匿名插槽" class="headerlink" title="匿名插槽"></a>匿名插槽</h6><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// my-slot-cpn</span><br>&lt;template&gt;<br>  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">h5</span>&gt;</span>Start<span class="hljs-tag">&lt;/<span class="hljs-name">h5</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">slot</span>&gt;</span></span><br><span class="language-xml">        默认</span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">slot</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">h5</span>&gt;</span>End<span class="hljs-tag">&lt;/<span class="hljs-name">h5</span>&gt;</span></span><br><span class="language-xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>&lt;/template&gt;<br><span class="hljs-comment">//引用 </span><br><span class="hljs-comment">//传什么都可行 甚至组件</span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">my-slot-cpn</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">button</span>&gt;</span>我是按钮<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">my-slot-cpn</span>&gt;</span></span><br></code></pre></td></tr></table></figure>

<h6 id="具名插槽"><a href="#具名插槽" class="headerlink" title="具名插槽"></a>具名插槽</h6><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs javascript">&lt;template&gt;<br>  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">h5</span>&gt;</span>Start<span class="hljs-tag">&lt;/<span class="hljs-name">h5</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">slot</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;come&quot;</span>&gt;</span></span><br><span class="language-xml">        默认</span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">slot</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">h5</span>&gt;</span>End<span class="hljs-tag">&lt;/<span class="hljs-name">h5</span>&gt;</span></span><br><span class="language-xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>&lt;/template&gt;<br><span class="hljs-comment">//------------------------</span><br>&lt;my-slot-cpn &gt;<br>     &lt;template #come&gt; // #come 为 v-slot:come的简写<br>      	&lt;button&gt;我是按钮&lt;/button&gt;<br>     &lt;template&gt;<br>&lt;/my-slot-cpn&gt;<br>//--------------------------<br>&lt;my-slot-cpn :name=&quot;name&quot;&gt;<br>    &lt;template #[name]&gt;<br>        &lt;i&gt;why内容&lt;/i&gt;<br>     &lt;/template&gt;<br>&lt;/my-slot-cpn&gt;<br><br>&lt;template&gt;<br>  &lt;div&gt;<br>      &lt;slot :name=&quot;name&quot;&gt;<br>        默认<br>      &lt;/slot&gt;<br>  &lt;/div&gt;<br>&lt;/template&gt;<br></code></pre></td></tr></table></figure>

<h6 id="作用域插槽"><a href="#作用域插槽" class="headerlink" title="作用域插槽"></a>作用域插槽</h6><p>可以在绑定插槽的时候使用template 并且绑定属性（v-slot）&#x3D;”slotProps” </p>
<p>slotProps的数据为 子组件slot上所绑定的属性值</p>
<p>&#x2F;&#x2F; App.vue</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs javascript">&lt;template&gt;<br>  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">  	// v-solt = #default</span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">show-names</span> <span class="hljs-attr">:names</span>=<span class="hljs-string">&quot;names&quot;</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">template</span> #<span class="hljs-attr">default</span>=<span class="hljs-string">&quot;slotProps&quot;</span>&gt;</span></span><br><span class="language-xml">      	// slotProps =&gt; &#123; &quot;item&quot;: &quot;why&quot;, &quot;index&quot;: 0 &#125;</span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">button</span>&gt;</span>&#123;&#123;slotProps.item&#125;&#125; + &#123;&#123;slotProps.index&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">show-names</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-comment">&lt;!-- 若插槽有名字  v-slot:left =&gt; #left --&gt;</span> </span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">show-names</span> <span class="hljs-attr">:names</span>=<span class="hljs-string">&quot;names&quot;</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">template</span> #<span class="hljs-attr">left</span>=<span class="hljs-string">&quot;slotProps&quot;</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">button</span>&gt;</span>&#123;&#123;slotProps.item&#125;&#125; + &#123;&#123;slotProps.index + 1&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">show-names</span>&gt;</span></span><br><span class="language-xml">	</span><br><span class="language-xml">    <span class="hljs-comment">&lt;!-- 如果插槽为默认 则可以下方这种写法 ==&gt; 独占默认插槽 --&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">show-names</span> <span class="hljs-attr">:names</span>=<span class="hljs-string">&quot;names&quot;</span> <span class="hljs-attr">v-slot</span>=<span class="hljs-string">&quot;slotProps&quot;</span>&gt;</span> </span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">button</span>&gt;</span>&#123;&#123;slotProps.item&#125;&#125; + &#123;&#123;slotProps.index&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">show-names</span>&gt;</span></span><br><span class="language-xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>&lt;/template&gt;<br><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="language-javascript"><span class="language-xml">  <span class="hljs-keyword">import</span> <span class="hljs-title class_">ShowNames</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./ShowNames.vue&#x27;</span>;</span></span><br><span class="language-javascript"><span class="language-xml">  <span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;</span></span><br><span class="language-javascript"><span class="language-xml">    <span class="hljs-attr">components</span>: &#123;</span></span><br><span class="language-javascript"><span class="language-xml">      <span class="hljs-title class_">ShowNames</span></span></span><br><span class="language-javascript"><span class="language-xml">    &#125;,</span></span><br><span class="language-javascript"><span class="language-xml">    <span class="hljs-title function_">data</span>(<span class="hljs-params"></span>) &#123;</span></span><br><span class="language-javascript"><span class="language-xml">      <span class="hljs-keyword">return</span> &#123;</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-attr">names</span>: [<span class="hljs-string">&quot;why&quot;</span>, <span class="hljs-string">&quot;kobe&quot;</span>, <span class="hljs-string">&quot;james&quot;</span>, <span class="hljs-string">&quot;curry&quot;</span>]</span></span><br><span class="language-javascript"><span class="language-xml">      &#125;</span></span><br><span class="language-javascript"><span class="language-xml">    &#125;</span></span><br><span class="language-javascript"><span class="language-xml">  &#125;</span></span><br><span class="language-javascript"><span class="language-xml"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br></code></pre></td></tr></table></figure>

<p>&#x2F;&#x2F;ShowNames.vue</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs javascript">&lt;template&gt;<br>  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">template</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;(item,index) in names&quot;</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">&quot;item&quot;</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-comment">&lt;!-- 可以取不同的名字访问 但是不可以访问同样的值两次 --&gt;</span>	</span><br><span class="language-xml">      <span class="hljs-comment">&lt;!-- name=&quot;default&quot; 等同于不写 --&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">slot</span> <span class="hljs-attr">:item</span>=<span class="hljs-string">&quot;item&quot;</span> <span class="hljs-attr">:index</span>=<span class="hljs-string">&quot;index&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">slot</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">slot</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;left&quot;</span> <span class="hljs-attr">:item</span>=<span class="hljs-string">&quot;item&quot;</span> <span class="hljs-attr">:index</span>=<span class="hljs-string">&quot;index&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">slot</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span><br><span class="language-xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>&lt;/template&gt;<br><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="language-javascript"><span class="language-xml">  <span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;</span></span><br><span class="language-javascript"><span class="language-xml">    <span class="hljs-attr">props</span>: &#123;</span></span><br><span class="language-javascript"><span class="language-xml">      <span class="hljs-attr">names</span>:&#123;</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-attr">type</span>:<span class="hljs-title class_">Array</span>,</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-attr">default</span>:<span class="hljs-function">()=&gt;</span>[]</span></span><br><span class="language-javascript"><span class="language-xml">      &#125;</span></span><br><span class="language-javascript"><span class="language-xml">    &#125;</span></span><br><span class="language-javascript"><span class="language-xml">  &#125;</span></span><br><span class="language-javascript"><span class="language-xml"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br></code></pre></td></tr></table></figure>

<h3 id="组件"><a href="#组件" class="headerlink" title="组件"></a>组件</h3><h4 id="动态组件"><a href="#动态组件" class="headerlink" title="动态组件"></a>动态组件</h4><h5 id="keep-alive-x2F-component-x2F-生命周期"><a href="#keep-alive-x2F-component-x2F-生命周期" class="headerlink" title="keep-alive&#x2F;component&#x2F;生命周期"></a>keep-alive&#x2F;component&#x2F;生命周期</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs javascript">&lt;!-- include/exclude 包括=&gt; string | array | <span class="hljs-title class_">RegExp</span> --&gt;<br>&lt;!-- 匹配时 是根据子组件的 name属性确定的 --&gt;<br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">keep-alive</span>  <span class="hljs-attr">exclude</span>=<span class="hljs-string">&quot;about&quot;</span> <span class="hljs-attr">include</span>=<span class="hljs-string">&quot;home,about&quot;</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">component</span> <span class="hljs-attr">:is</span>=<span class="hljs-string">&quot;currentTab&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">                <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;coderwhy&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">                <span class="hljs-attr">:age</span>=<span class="hljs-string">&quot;18&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">                @<span class="hljs-attr">pageClick</span>=<span class="hljs-string">&quot;pageClick&quot;</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">component</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">keep-alive</span>&gt;</span></span><br><br>currentTab <span class="hljs-comment">//  tabs: [&quot;home&quot;, &quot;about&quot;, &quot;category&quot;]中其一</span><br><br>keep-alive <span class="hljs-comment">// 缓存组件 会保留状态 并且加入两个新的生命周期函数</span><br>activated 组件进入时触发<br>deactivated 组件离开时触发<br><br>若组件被缓存了<br>离开时不会触发unmouted函数<br>只有首次进入才会触发 created属性<br><br><span class="hljs-title function_">created</span>(<span class="hljs-params"></span>) &#123;<br>	<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;about created&quot;</span>);<br>&#125;,<br><span class="hljs-title function_">unmounted</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;about unmounted&quot;</span>);<br>&#125;,<br><span class="hljs-title function_">activated</span>(<span class="hljs-params"></span>) &#123;<br>   <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;about activated&quot;</span>);<br>&#125;,<br><span class="hljs-title function_">deactivated</span>(<span class="hljs-params"></span>) &#123;<br>   <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;about deactivated&quot;</span>);<br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="异步组件"><a href="#异步组件" class="headerlink" title="异步组件"></a>异步组件</h4><p> <strong>默认的打包过程：</strong></p>
<p>默认情况下，在构建整个组件树的过程中，因为组件和组件之间是通过模块化直接依赖的，那么webpack在打包时就会将组 </p>
<p>件模块打包到一起（比如一个app.js文件中）；</p>
<p>这个时候随着项目的不断庞大，app.js文件的内容过大，会造成首屏的渲染速度变慢；</p>
<p><strong>打包时，代码的分包：</strong></p>
<p> 所以，对于一些不需要立即使用的组件，我们可以单独对它们进行拆分，拆分成一些小的代码块chunk.js； </p>
<p> 这些chunk.js会在需要时从服务器加载下来，并且运行代码，显示对应的内容；</p>
<p>个人（Wusu）理解 ：可以理解为常用的路由懒记载类比的东西 分包之后使用时进行请求 ;</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">() =&gt; import(&quot;组件.vue&quot;)<br>或者<br>(resolve) =&gt; require([&#x27;zujian.vue&#x27;],resolve)<br></code></pre></td></tr></table></figure>

<p>Vue的异步组件</p>
<p><u>异步组件的目的是可以对其进行分包 上线后可单独加载 速度加快</u></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// Vue3异步组件</span><br><span class="hljs-keyword">import</span> &#123; defineAsyncComponent &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span>;<br><span class="hljs-keyword">const</span> <span class="hljs-title class_">AsyncCategory</span> = <span class="hljs-title function_">defineAsyncComponent</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">&quot;./AsyncCategory.vue&quot;</span>))<br></code></pre></td></tr></table></figure>

<p>vue Suspense （实验性属性）</p>
<p><a target="_blank" rel="noopener" href="https://cn.vuejs.org/guide/built-ins/suspense.html#async-dependencies">https://cn.vuejs.org/guide/built-ins/suspense.html#async-dependencies</a></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs javascript">&lt;suspense&gt;<br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span> #<span class="hljs-attr">default</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">async-category</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">async-category</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span><br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span> #<span class="hljs-attr">fallback</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">loading</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">loading</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span><br>&lt;/suspense&gt;<br></code></pre></td></tr></table></figure>

<p>&#x2F;&#x2F; 效果不知道 目前来看 首先显示fallback里的东西 然后显示 default的东西 速度很快会闪屏  算是个加载效果（？</p>
<h3 id="Refs-vue3"><a href="#Refs-vue3" class="headerlink" title="Refs(vue3)"></a>Refs(vue3)</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs javascript">&lt;nav-bar ref=<span class="hljs-string">&quot;navBar&quot;</span>&gt;&lt;/nav-bar&gt;<br><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">$refs</span>.<span class="hljs-property">navBar</span>) <span class="hljs-comment">// proxy</span><br>拿组件属性方法之类与从前一致 拿到<span class="hljs-variable constant_">DOM</span>节点要$el<br></code></pre></td></tr></table></figure>

<p>vue3 移除了 $children (根本没用过)</p>
<p>$parent 拿到父组件 $root 拿到根元素  （&#x3D;&gt; 不推荐使用 一般还是props emits 传值 ）</p>
<h3 id="组件的v-model"><a href="#组件的v-model" class="headerlink" title="组件的v-model"></a><u><em>组件的v-model</em></u></h3><h4 id="Vue2的写法"><a href="#Vue2的写法" class="headerlink" title="Vue2的写法"></a>Vue2的写法</h4><p>两种写法只是绑定值的时候有所不同</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs javascript">&lt;all :filetype.<span class="hljs-property">sync</span>=<span class="hljs-string">&quot;filetype&quot;</span>&gt;&lt;/all&gt;<br></code></pre></td></tr></table></figure>

<h4 id="以下为Vue3的写法"><a href="#以下为Vue3的写法" class="headerlink" title="以下为Vue3的写法"></a>以下为Vue3的写法</h4><p>组件上使用 v-model Vue做了什么事情</p>
<p>绑定一个值并且改变</p>
<p>&#x2F;&#x2F; 父组件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">&lt;!-- 组件上使用v-model --&gt;<br>&lt;hy-input v-model=&quot;message&quot;&gt;&lt;/hy-input&gt; <br>			||<br>&lt;hy-input :modelValue=&quot;message&quot; @update:model-value=&quot;message = $event&quot;&gt;&lt;/hy-input&gt; <br></code></pre></td></tr></table></figure>

<p>&#x2F;&#x2F; 子组件</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs javascript">&lt;input type=<span class="hljs-string">&quot;text&quot;</span> :value=<span class="hljs-string">&quot;modelValue&quot;</span> @input=<span class="hljs-string">&quot;changeValue&quot;</span>&gt; <br><br><span class="hljs-attr">props</span>: &#123;<br>    <span class="hljs-attr">modelValue</span>: &#123;<br>    	<span class="hljs-attr">type</span>: [<span class="hljs-title class_">String</span>, <span class="hljs-title class_">Array</span>, <span class="hljs-title class_">Number</span>],<br>    &#125;,<br>&#125;,<br><span class="hljs-comment">//methods</span><br><span class="hljs-title function_">changeValue</span>(<span class="hljs-params">e</span>)&#123;<br>    <span class="hljs-variable language_">this</span>.$emit(<span class="hljs-string">&quot;update:model-value&quot;</span>,e.<span class="hljs-property">target</span>.<span class="hljs-property">value</span>)<br>&#125;<br><br>或者 计算属性来改变外部的值 （=&gt; 目前能想到的 ele组件的 输入框）<br><br>&lt;input type=<span class="hljs-string">&quot;text&quot;</span> v-model=<span class="hljs-string">&quot;value&quot;</span>&gt;<br><br><span class="hljs-attr">computed</span>:&#123;<br>    <span class="hljs-attr">value</span>:&#123;<br>        <span class="hljs-title function_">set</span>(<span class="hljs-params">val</span>)&#123;<br>            <span class="hljs-variable language_">this</span>.$emit(<span class="hljs-string">&quot;update:model-value&quot;</span>,val)<br>        &#125;,<br>        <span class="hljs-title function_">get</span>(<span class="hljs-params"></span>)&#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">modelValue</span>;<br>       	&#125;<br>    &#125;<br>&#125;,<br></code></pre></td></tr></table></figure>

<p>v-model 和 :value 绑定在组件上的区别</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">&lt;!-- v-model 双向数据绑定  : 单向数据绑定 ==&gt; 简单来说 v-model的东西变了 :value 跟着变 但是 :value的数据是独立的 与外面的无瓜 --&gt;<br>&lt;input type=&quot;text&quot; v-model:value=&quot;message&quot;&gt;<br>&lt;input type=&quot;text&quot; :value=&quot;message&quot;&gt;<br></code></pre></td></tr></table></figure>

<p>&#x2F;&#x2F;改变多个值</p>
<p>p:两个输入框 上下分别可以对应改变message 和 title的值</p>
<p>父组件</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs javascript">&lt;hy-inputa v-model=<span class="hljs-string">&quot;message&quot;</span> v-<span class="hljs-attr">model</span>:title=<span class="hljs-string">&quot;title&quot;</span>&gt;&lt;/hy-inputa&gt;<br><br>&#123;&#123;message&#125;&#125;<br>&#123;&#123;title&#125;&#125;<br></code></pre></td></tr></table></figure>

<p>hy-inputa</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs javascript">&lt;input type=<span class="hljs-string">&quot;text&quot;</span> v-model=<span class="hljs-string">&quot;value&quot;</span>&gt;<br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;titleTit&quot;</span>&gt;</span></span><br><span class="language-xml"></span><br><span class="language-xml">  props: &#123;</span><br><span class="language-xml">    modelValue: &#123;</span><br><span class="language-xml">      type: [String, Array, Number],</span><br><span class="language-xml">    &#125;,</span><br><span class="language-xml">    title:String,</span><br><span class="language-xml">  &#125;,</span><br><span class="language-xml">  </span><br><span class="language-xml">  </span><br><span class="language-xml">  emits:[&quot;update:model-value&quot;,&quot;update:title&quot;],</span><br><span class="language-xml">  computed:&#123;</span><br><span class="language-xml">    value:&#123;</span><br><span class="language-xml">      set(val)&#123;</span><br><span class="language-xml">        this.$emit(&quot;update:model-value&quot;,val)</span><br><span class="language-xml">      &#125;,</span><br><span class="language-xml">      get()&#123;</span><br><span class="language-xml">        return this.modelValue;</span><br><span class="language-xml">      &#125;</span><br><span class="language-xml">    &#125;,</span><br><span class="language-xml">    titleTit:&#123;</span><br><span class="language-xml">      set(val)&#123;</span><br><span class="language-xml">        this.$emit(&quot;update:title&quot;,val)</span><br><span class="language-xml">      &#125;,</span><br><span class="language-xml">      get()&#123;</span><br><span class="language-xml">        return this.title;</span><br><span class="language-xml">      &#125;</span><br><span class="language-xml">    &#125;</span><br><span class="language-xml">  &#125;,</span><br></code></pre></td></tr></table></figure>

<h3 id="动画"><a href="#动画" class="headerlink" title="动画"></a>动画</h3><h4 id="基本使用"><a href="#基本使用" class="headerlink" title="基本使用"></a>基本使用</h4><p>注意事项</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs javascript">&lt;!-- type=<span class="hljs-string">&quot;transition&quot;</span> <span class="hljs-comment">// transition 或者 animation ==&gt; 一般没啥用，过渡和动画同时存在时根据某一个来结束过渡 不然会抽搐闪烁 --&gt;</span><br>mode<br>&lt;!-- <span class="hljs-keyword">in</span>-out ==&gt; 当前元素后离开 要加入的元素先加载 --&gt;<br>&lt;!-- out-<span class="hljs-keyword">in</span> ==&gt; 当前元素先离开 然后之后的在进入 --&gt;<br>&lt;!-- appear 进入界面时 直接有动画效果 --&gt;<br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">transition</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;why&quot;</span> <span class="hljs-attr">mode</span>=<span class="hljs-string">&quot;out-in&quot;</span>  <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;animation&quot;</span> <span class="hljs-attr">appear</span>&gt;</span></span><br><span class="language-xml">	<span class="hljs-tag">&lt;<span class="hljs-name">component</span> <span class="hljs-attr">:is</span>=<span class="hljs-string">&quot;isShow ? &#x27;home&#x27;: &#x27;about&#x27;&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">component</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">transition</span>&gt;</span></span><br></code></pre></td></tr></table></figure>

<p>Transition 各阶段</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs javascript">xxx-enter-<span class="hljs-function"><span class="hljs-params">from</span> =&gt;</span> xxx-enter-<span class="hljs-function"><span class="hljs-params">active</span> =&gt;</span> xxx-enter-to<br>leave 同理<br></code></pre></td></tr></table></figure>

<p>直接拿animation的动画会很＜（＾－＾）＞</p>
<p>添加的类名同 直接设置css动画名同理</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs javascript">&lt;transition<br>    enter-active-<span class="hljs-keyword">class</span>=<span class="hljs-string">&quot;animate__animated animate__fadeInDown&quot;</span><br>    leave-active-<span class="hljs-keyword">class</span>=<span class="hljs-string">&quot;animate__animated animate__fadeOut&quot;</span><br>    &gt;<br>	<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>我是BBB<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span></span><br>&lt;/transition&gt;<br></code></pre></td></tr></table></figure>

<h4 id="gsap动画库"><a href="#gsap动画库" class="headerlink" title="gsap动画库"></a>gsap动画库</h4><p>效果为列表动画 非常丝滑</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><code class="hljs javascript">&lt;template&gt;<br>  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;keyword&quot;</span> /&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">transition-group</span> <span class="hljs-attr">tag</span>=<span class="hljs-string">&quot;ul&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;susu&quot;</span> <span class="hljs-attr">:css</span>=<span class="hljs-string">&quot;false&quot;</span>  @<span class="hljs-attr">before-enter</span>=<span class="hljs-string">&quot;beforeEnter&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">        @<span class="hljs-attr">enter</span>=<span class="hljs-string">&quot;enter&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">        @<span class="hljs-attr">leave</span>=<span class="hljs-string">&quot;leave&quot;</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">li</span></span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;(item,index) in showNames&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">:key</span>=<span class="hljs-string">&quot;item&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">:data-index</span>=<span class="hljs-string">&quot;index&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">      &gt;</span></span><br><span class="language-xml">        &#123;&#123; item &#125;&#125;</span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">transition-group</span>&gt;</span></span><br><span class="language-xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>&lt;/template&gt;<br><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="language-javascript"><span class="language-xml"><span class="hljs-keyword">import</span> gsap <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;gsap&quot;</span>;</span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;</span></span><br><span class="language-javascript"><span class="language-xml">  <span class="hljs-title function_">data</span>(<span class="hljs-params"></span>) &#123;</span></span><br><span class="language-javascript"><span class="language-xml">    <span class="hljs-keyword">return</span> &#123;</span></span><br><span class="language-javascript"><span class="language-xml">      <span class="hljs-attr">names</span>: [<span class="hljs-string">&quot;abc&quot;</span>, <span class="hljs-string">&quot;cba&quot;</span>, <span class="hljs-string">&quot;nba&quot;</span>, <span class="hljs-string">&quot;why&quot;</span>, <span class="hljs-string">&quot;lilei&quot;</span>, <span class="hljs-string">&quot;hmm&quot;</span>, <span class="hljs-string">&quot;kobe&quot;</span>, <span class="hljs-string">&quot;james&quot;</span>],</span></span><br><span class="language-javascript"><span class="language-xml">      <span class="hljs-attr">keyword</span>: <span class="hljs-string">&quot;&quot;</span>,</span></span><br><span class="language-javascript"><span class="language-xml">    &#125;;</span></span><br><span class="language-javascript"><span class="language-xml">  &#125;,</span></span><br><span class="language-javascript"><span class="language-xml">  <span class="hljs-attr">computed</span>: &#123;</span></span><br><span class="language-javascript"><span class="language-xml">    <span class="hljs-title function_">showNames</span>(<span class="hljs-params"></span>) &#123;</span></span><br><span class="language-javascript"><span class="language-xml">      <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">names</span>.<span class="hljs-title function_">filter</span>(<span class="hljs-function">(<span class="hljs-params">item</span>) =&gt;</span> item.<span class="hljs-title function_">indexOf</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">keyword</span>) !== -<span class="hljs-number">1</span>);</span></span><br><span class="language-javascript"><span class="language-xml">    &#125;,</span></span><br><span class="language-javascript"><span class="language-xml">  &#125;,</span></span><br><span class="language-javascript"><span class="language-xml">  <span class="hljs-attr">methods</span>: &#123;</span></span><br><span class="language-javascript"><span class="language-xml">    <span class="hljs-title function_">beforeEnter</span>(<span class="hljs-params">el</span>) &#123;</span></span><br><span class="language-javascript"><span class="language-xml">      el.<span class="hljs-property">style</span>.<span class="hljs-property">opacity</span> = <span class="hljs-number">0</span>;</span></span><br><span class="language-javascript"><span class="language-xml">      el.<span class="hljs-property">style</span>.<span class="hljs-property">height</span> = <span class="hljs-number">0</span>;</span></span><br><span class="language-javascript"><span class="language-xml">    &#125;,</span></span><br><span class="language-javascript"><span class="language-xml">    <span class="hljs-title function_">enter</span>(<span class="hljs-params">el, done</span>) &#123;</span></span><br><span class="language-javascript"><span class="language-xml">      gsap.<span class="hljs-title function_">to</span>(el, &#123;</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-attr">opacity</span>: <span class="hljs-number">1</span>,</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-attr">height</span>:<span class="hljs-string">&quot;1.5em&quot;</span>,</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-attr">delay</span>:el.<span class="hljs-property">dataset</span>.<span class="hljs-property">index</span> * <span class="hljs-number">0.1</span>,</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-attr">onComplete</span>: done,</span></span><br><span class="language-javascript"><span class="language-xml">      &#125;);</span></span><br><span class="language-javascript"><span class="language-xml">    &#125;,</span></span><br><span class="language-javascript"><span class="language-xml">    <span class="hljs-title function_">leave</span>(<span class="hljs-params">el, done</span>) &#123;</span></span><br><span class="language-javascript"><span class="language-xml">      gsap.<span class="hljs-title function_">to</span>(el, &#123;</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-attr">opacity</span>: <span class="hljs-number">0</span>,</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-attr">height</span>:<span class="hljs-number">0</span>,</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-attr">delay</span>:el.<span class="hljs-property">dataset</span>.<span class="hljs-property">index</span> * <span class="hljs-number">0.1</span>,</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-attr">onComplete</span>: done,</span></span><br><span class="language-javascript"><span class="language-xml">      &#125;);</span></span><br><span class="language-javascript"><span class="language-xml">    &#125;, </span></span><br><span class="language-javascript"><span class="language-xml">  &#125;,</span></span><br><span class="language-javascript"><span class="language-xml">  <span class="hljs-title function_">mounted</span>(<span class="hljs-params"></span>) &#123;</span></span><br><span class="language-javascript"><span class="language-xml">  &#125;,</span></span><br><span class="language-javascript"><span class="language-xml">&#125;;</span></span><br><span class="language-javascript"><span class="language-xml"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br></code></pre></td></tr></table></figure>

<h3 id="Mixins-代码复用-（共享）"><a href="#Mixins-代码复用-（共享）" class="headerlink" title="Mixins 代码复用 （共享）"></a>Mixins 代码复用 （共享）</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// demoMixin</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> demoMixin = &#123;<br>  <span class="hljs-title function_">data</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> &#123;<br>      <span class="hljs-attr">message</span>: <span class="hljs-string">&quot;Hello DemoMixin&quot;</span><br>    &#125;<br>  &#125;,<br>  <span class="hljs-attr">methods</span>: &#123;<br>    <span class="hljs-title function_">foo</span>(<span class="hljs-params"></span>) &#123;<br>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>)<br>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">title</span>);<br>    &#125;<br>  &#125;,<br>  <span class="hljs-title function_">created</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;执行了demo mixin created&quot;</span>);<br>  &#125;<br>&#125; <br></code></pre></td></tr></table></figure>

<p>App.vue 可以直接掉 等于是写在了外面的方法之类</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs javascript">&lt;button @click=<span class="hljs-string">&quot;foo&quot;</span>&gt;按钮&lt;/button&gt;<br><br><span class="hljs-keyword">import</span> &#123; demoMixin &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./mixins/demoMixin&#x27;</span>;<br></code></pre></td></tr></table></figure>

<p>有冲突 生命周期都执行 其他的 本体大 引入的小 </p>
<p>全局混入</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs javascript">app.<span class="hljs-title function_">mixin</span>(&#123;<br>    <span class="hljs-title function_">created</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;@222&quot;</span>)<br>    &#125;,<br>&#125;)<br></code></pre></td></tr></table></figure>

<h4 id="extend-了解"><a href="#extend-了解" class="headerlink" title="extend(了解)"></a>extend(了解)</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs javascript">&lt;template&gt;<br>  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">    Home Page</span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>&#123;&#123;title&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;bar&quot;</span>&gt;</span>按钮<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>&lt;/template&gt;<br><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="language-javascript"><span class="language-xml">  <span class="hljs-comment">// 引入其他组件 可以使用其他的方法/数据</span></span></span><br><span class="language-javascript"><span class="language-xml">  <span class="hljs-keyword">import</span> <span class="hljs-title class_">BasePage</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./BasePage.vue&#x27;</span>;</span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml">  <span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;</span></span><br><span class="language-javascript"><span class="language-xml">    <span class="hljs-attr">extends</span>: [<span class="hljs-title class_">BasePage</span>],</span></span><br><span class="language-javascript"><span class="language-xml">    <span class="hljs-title function_">data</span>(<span class="hljs-params"></span>) &#123;</span></span><br><span class="language-javascript"><span class="language-xml">      <span class="hljs-keyword">return</span> &#123;</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-attr">content</span>: <span class="hljs-string">&quot;Hello Home&quot;</span></span></span><br><span class="language-javascript"><span class="language-xml">      &#125;</span></span><br><span class="language-javascript"><span class="language-xml">    &#125;</span></span><br><span class="language-javascript"><span class="language-xml">  &#125;</span></span><br><span class="language-javascript"><span class="language-xml"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br><br></code></pre></td></tr></table></figure>

<h3 id="composition-API"><a href="#composition-API" class="headerlink" title="composition API"></a><u>composition <em>API</em></u></h3><p>setup (不是响应式)</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><code class="hljs javascript">&lt;template&gt;<br>  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">    Home Page</span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>&#123;&#123;message&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span></span><br><span class="language-xml"></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>&#123;&#123;title&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>当前计数: &#123;&#123;counter&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;increment&quot;</span>&gt;</span>+1<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>&lt;/template&gt;<br><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="language-javascript"><span class="language-xml">  <span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;</span></span><br><span class="language-javascript"><span class="language-xml">    <span class="hljs-attr">props</span>: &#123;</span></span><br><span class="language-javascript"><span class="language-xml">      <span class="hljs-attr">message</span>: &#123;</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-attr">type</span>: <span class="hljs-title class_">String</span>,</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span></span></span><br><span class="language-javascript"><span class="language-xml">      &#125;</span></span><br><span class="language-javascript"><span class="language-xml">    &#125;,</span></span><br><span class="language-javascript"><span class="language-xml">    <span class="hljs-title function_">data</span>(<span class="hljs-params"></span>) &#123;</span></span><br><span class="language-javascript"><span class="language-xml">      <span class="hljs-keyword">return</span> &#123;</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-attr">counter</span>: <span class="hljs-number">100</span></span></span><br><span class="language-javascript"><span class="language-xml">      &#125;</span></span><br><span class="language-javascript"><span class="language-xml">    &#125;,</span></span><br><span class="language-javascript"><span class="language-xml">    <span class="hljs-comment">/**</span></span></span><br><span class="hljs-comment"><span class="language-javascript"><span class="language-xml">     * 参数一: props, 父组件传递过来属性</span></span></span><br><span class="hljs-comment"><span class="language-javascript"><span class="language-xml">     */</span></span></span><br><span class="language-javascript"><span class="language-xml">    <span class="hljs-comment">// setup函数有哪些参数?</span></span></span><br><span class="language-javascript"><span class="language-xml">    <span class="hljs-comment">// setup函数有什么样的返回值</span></span></span><br><span class="language-javascript"><span class="language-xml">    <span class="hljs-comment">// setup(props, context) &#123;</span></span></span><br><span class="language-javascript"><span class="language-xml">    <span class="hljs-title function_">setup</span>(<span class="hljs-params">props, &#123;attrs, slots, emit&#125;</span>) &#123;</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-comment">// console.log(props) // props里的东西</span></span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-comment">// console.log(attrs) // 绑定的值 除去props里的东西</span></span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-comment">// console.log(slots)</span></span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-comment">// console.log(emit)</span></span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml">      <span class="hljs-keyword">return</span> &#123;</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-attr">title</span>: <span class="hljs-string">&quot;Hello Home&quot;</span>,</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-attr">counter</span>: <span class="hljs-number">100</span></span></span><br><span class="language-javascript"><span class="language-xml">      &#125;</span></span><br><span class="language-javascript"><span class="language-xml">    &#125;,</span></span><br><span class="language-javascript"><span class="language-xml">    <span class="hljs-attr">methods</span>: &#123;</span></span><br><span class="language-javascript"><span class="language-xml">      <span class="hljs-title function_">btnClick</span>(<span class="hljs-params"></span>) &#123;</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-variable language_">this</span>.$emit(<span class="hljs-string">&quot;&quot;</span>)</span></span><br><span class="language-javascript"><span class="language-xml">      &#125;</span></span><br><span class="language-javascript"><span class="language-xml">    &#125;</span></span><br><span class="language-javascript"><span class="language-xml">  &#125;</span></span><br><span class="language-javascript"><span class="language-xml"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br></code></pre></td></tr></table></figure>

<h4 id="响应式API"><a href="#响应式API" class="headerlink" title="响应式API"></a>响应式API</h4><p>setup函数没有this:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">表达的含义是this并没有指向当前组件实例； <br><br>并且在setup被调用之前，data、computed、methods等都没有被解析； <br><br>所以无法在setup中获取this； <br></code></pre></td></tr></table></figure>

<h5 id="reactiveAPI"><a href="#reactiveAPI" class="headerlink" title="reactiveAPI"></a>reactiveAPI</h5><p>reactive API对<strong>传入的类型是有限制的</strong>，它要求我们必须传入的是<strong>一个对象或者数组类型</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">let</span> state = <span class="hljs-title function_">reactive</span>(&#123;<br>       <span class="hljs-attr">counter</span>:<span class="hljs-number">100</span>,<br> &#125;)<br><br><span class="hljs-keyword">return</span>&#123;<br>    state.<span class="hljs-property">counter</span><br>&#125;<br></code></pre></td></tr></table></figure>

<h5 id="ref-API"><a href="#ref-API" class="headerlink" title="ref  API"></a>ref  API</h5><p>灵活</p>
<p>toRefs  toRef</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">let</span> counter = <span class="hljs-title function_">ref</span>(<span class="hljs-number">100</span>)<br><br>script操作 counter.<span class="hljs-property">value</span>++<br> <br>template模板里则直接可以 counter<br><br><span class="hljs-keyword">return</span> &#123;<br>    counter,<br>&#125;<br><br><br><span class="hljs-keyword">const</span> info = <span class="hljs-title function_">reactive</span>(&#123;<span class="hljs-attr">name</span>: <span class="hljs-string">&quot;why&quot;</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">18</span>&#125;);<br><span class="hljs-comment">//1.toRefs: 将reactive对象中的所有属性都转成ref, 建立链接</span><br><span class="hljs-keyword">let</span> &#123; name, age &#125; = <span class="hljs-title function_">toRefs</span>(info); <span class="hljs-comment">// 可修改</span><br><span class="hljs-comment">// 2.toRef: 对其中一个属性进行转换ref, 建立链接</span><br><span class="hljs-keyword">let</span> &#123; name &#125; = info; <span class="hljs-comment">// 只读</span><br><span class="hljs-keyword">let</span> age = <span class="hljs-title function_">toRef</span>(info, <span class="hljs-string">&quot;age&quot;</span>); <span class="hljs-comment">//可修改</span><br></code></pre></td></tr></table></figure>

<h5 id="readonly-API"><a href="#readonly-API" class="headerlink" title="readonly API"></a>readonly API</h5><p>只读api</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">let</span> su = <span class="hljs-title function_">readonly</span>(counter)<br><br>传入后 su 为只读不可修改 但是可以通过改变原对象的值进行改变 <br><br>一般用来 传给子组件 让子组件只读不能修改 ==&gt; 修改直接报错<br></code></pre></td></tr></table></figure>

<h5 id="API补充"><a href="#API补充" class="headerlink" title="API补充"></a>API补充</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">isProxy<br>检查对象是否是由 reactive 或 readonly创建的 proxy。<br>isReactive<br>检查对象是否是由 reactive创建的响应式代理：如果该代理是 readonly 建的，但包裹了由 reactive 创建的另一个代理，它也会返回 true； <br>isReadonly<br>检查对象是否是由 readonly 创建的只读代理。 <br>toRaw<br>返回 reactive 或 readonly 代理的原始对象（不建议保留对原始对象的持久引用。请谨慎使用）。<br>shallowReactive<br>创建一个响应式代理，它跟踪其自身 property 的响应性，但不执行嵌套对象的深层响应式转换 (深层还是原生对象)。<br>shallowReadonly<br>创建一个 proxy，使其自身的 property 为只读，但不执行嵌套对象的深度只读转换（深层还是可读、可写的）。<br></code></pre></td></tr></table></figure>

<h4 id="Computed"><a href="#Computed" class="headerlink" title="Computed"></a>Computed</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> &#123; ref, computed &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span>;<br><br>  <span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;<br>    <span class="hljs-title function_">setup</span>(<span class="hljs-params"></span>) &#123;<br>      <span class="hljs-keyword">const</span> firstName = <span class="hljs-title function_">ref</span>(<span class="hljs-string">&quot;Kobe&quot;</span>);<br>      <span class="hljs-keyword">const</span> lastName = <span class="hljs-title function_">ref</span>(<span class="hljs-string">&quot;Bryant&quot;</span>);<br><br>      <span class="hljs-comment">// 1.用法一: 传入一个getter函数 </span><br>      <span class="hljs-comment">// computed的返回值是一个ref对象 不可变</span><br>      <span class="hljs-keyword">let</span> fullName = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> firstName.<span class="hljs-property">value</span> + <span class="hljs-string">&quot; &quot;</span> + lastName.<span class="hljs-property">value</span>);<br><br>      <span class="hljs-comment">// 2.用法二: 传入一个对象, 对象包含getter/setter 可以通过设置来改变</span><br>      <span class="hljs-comment">// const fullName = computed(&#123;</span><br>      <span class="hljs-comment">//   get: () =&gt; firstName.value + &quot; &quot; + lastName.value,</span><br>      <span class="hljs-comment">//   set(newValue) &#123;</span><br>      <span class="hljs-comment">//     const names = newValue.split(&quot; &quot;);</span><br>      <span class="hljs-comment">//     firstName.value = names[0];</span><br>      <span class="hljs-comment">//     lastName.value = names[1];</span><br>      <span class="hljs-comment">//   &#125;</span><br>      <span class="hljs-comment">// &#125;);</span><br><br>      <span class="hljs-keyword">const</span> <span class="hljs-title function_">changeName</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br>        <span class="hljs-comment">// firstName.value = &quot;James&quot;</span><br>        <span class="hljs-comment">// fullName.value = &quot;coder why&quot;; // 计算值为只读 ==&gt; 方法一定义</span><br>        <span class="hljs-comment">// firstName.value = &quot;Code&quot;;</span><br>        <span class="hljs-comment">// lastName.value = &quot;Why&quot;;</span><br>      &#125;<br><br>      <span class="hljs-keyword">return</span> &#123;<br>        fullName,<br>        changeName<br>      &#125;<br>    &#125;<br>  &#125;<br></code></pre></td></tr></table></figure>

<h4 id="watchEffect"><a href="#watchEffect" class="headerlink" title="watchEffect"></a>watchEffect</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// watchEffect: 自动收集响应式的依赖</span><br><span class="hljs-keyword">const</span> name = <span class="hljs-title function_">ref</span>(<span class="hljs-string">&quot;why&quot;</span>);<br><span class="hljs-keyword">const</span> age = <span class="hljs-title function_">ref</span>(<span class="hljs-number">18</span>);<br><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">changeName</span> = (<span class="hljs-params"></span>) =&gt; name.<span class="hljs-property">value</span> = <span class="hljs-string">&quot;kobe&quot;</span><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">changeAge</span> = (<span class="hljs-params"></span>) =&gt; age.<span class="hljs-property">value</span>++<br><br><span class="hljs-keyword">const</span> stop =  <span class="hljs-title function_">watchEffect</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;name:&quot;</span>, name.<span class="hljs-property">value</span>, <span class="hljs-string">&quot;age:&quot;</span>, age.<span class="hljs-property">value</span>);<br>    <span class="hljs-comment">// name or age 改变值触发 会立即触发一次</span><br>&#125;);<br><span class="hljs-keyword">return</span> &#123;<br>    name,<br>    age,<br>    changeName,<br>    changeAge<br>&#125;<br></code></pre></td></tr></table></figure>

<h6 id="停止监听"><a href="#停止监听" class="headerlink" title="停止监听"></a>停止监听</h6><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// watchEffect() 函数返回一个stop函数 调用会停止监听 比如在 age.value 大于某个值的时候 去除监听</span><br><span class="hljs-keyword">const</span> stop = <span class="hljs-title function_">watchEffect</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;name:&quot;</span>, name.<span class="hljs-property">value</span>, <span class="hljs-string">&quot;age:&quot;</span>, age.<span class="hljs-property">value</span>);<br>&#125;);<br><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">changeName</span> = (<span class="hljs-params"></span>) =&gt; name.<span class="hljs-property">value</span> = <span class="hljs-string">&quot;kobe&quot;</span><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">changeAge</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br>    age.<span class="hljs-property">value</span>++;<br>    <span class="hljs-keyword">if</span> (age.<span class="hljs-property">value</span> &gt; <span class="hljs-number">25</span>) &#123;<br>        <span class="hljs-title function_">stop</span>();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<h6 id="清楚副作用"><a href="#清楚副作用" class="headerlink" title="清楚副作用"></a>清楚副作用</h6><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-title function_">setup</span>(<span class="hljs-params"></span>) &#123;<br>      <span class="hljs-comment">// watchEffect: 自动收集响应式的依赖</span><br>      <span class="hljs-keyword">const</span> name = <span class="hljs-title function_">ref</span>(<span class="hljs-string">&quot;why&quot;</span>);<br>      <span class="hljs-keyword">const</span> age = <span class="hljs-title function_">ref</span>(<span class="hljs-number">18</span>);<br><br>      <span class="hljs-keyword">const</span> stop = <span class="hljs-title function_">watchEffect</span>(<span class="hljs-function">(<span class="hljs-params">onInvalidate</span>) =&gt;</span> &#123;<br>        <span class="hljs-keyword">const</span> timer = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;网络请求成功~&quot;</span>);<br>        &#125;, <span class="hljs-number">2000</span>)<br><br>        <span class="hljs-comment">// 根据name和age两个变量发送网络请求</span><br>        <span class="hljs-title function_">onInvalidate</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>          <span class="hljs-comment">// 在这个函数中清除额外的副作用</span><br>          <span class="hljs-comment">// request.cancel()</span><br>          <span class="hljs-built_in">clearTimeout</span>(timer);<br>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;onInvalidate&quot;</span>);<br>        &#125;)<br>        <span class="hljs-comment">// &quot;name:&quot;, name.value, </span><br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;age:&quot;</span>, age.<span class="hljs-property">value</span>);<br>      &#125;);<br><br>      <span class="hljs-keyword">const</span> <span class="hljs-title function_">changeName</span> = (<span class="hljs-params"></span>) =&gt; name.<span class="hljs-property">value</span> = <span class="hljs-string">&quot;kobe&quot;</span><br>      <span class="hljs-keyword">const</span> <span class="hljs-title function_">changeAge</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br>        age.<span class="hljs-property">value</span>++;<br>        <span class="hljs-keyword">if</span> (age.<span class="hljs-property">value</span> &gt; <span class="hljs-number">25</span>) &#123;<br>          <span class="hljs-title function_">stop</span>();<br>        &#125;<br>      &#125;<br><br>      <span class="hljs-keyword">return</span> &#123;<br>        name,<br>        age,<br>        changeName,<br>        changeAge<br>      &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<h5 id="ref执行时机"><a href="#ref执行时机" class="headerlink" title="ref执行时机"></a>ref执行时机</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs javascript">&lt;template&gt;<br>  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">h2</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;title&quot;</span>&gt;</span>哈哈哈<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span></span><br><span class="language-xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>&lt;/template&gt;<br><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="language-javascript"><span class="language-xml">  <span class="hljs-keyword">import</span> &#123; ref, watchEffect &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span>;</span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml">  <span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;</span></span><br><span class="language-javascript"><span class="language-xml">    <span class="hljs-title function_">setup</span>(<span class="hljs-params"></span>) &#123;</span></span><br><span class="language-javascript"><span class="language-xml">      <span class="hljs-keyword">const</span> title = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">null</span>); <span class="hljs-comment">// 拿到原生ref节点 </span></span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml">      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(title)</span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml">      <span class="hljs-title function_">watchEffect</span>(<span class="hljs-function">() =&gt;</span> &#123;</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(title.<span class="hljs-property">value</span>);</span></span><br><span class="language-javascript"><span class="language-xml">      &#125;,&#123;</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-attr">flush</span>:<span class="hljs-string">&quot;post&quot;</span> <span class="hljs-comment">// 若是pre watchEffect会立即执行 打印null </span></span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-comment">//  默认值是pre 即在挂载或者更新前就执行</span></span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-comment">//  post将监听移动到组件挂载完毕后执行</span></span></span><br><span class="language-javascript"><span class="language-xml">      &#125;)</span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml">      <span class="hljs-keyword">return</span> &#123;</span></span><br><span class="language-javascript"><span class="language-xml">        title</span></span><br><span class="language-javascript"><span class="language-xml">      &#125;</span></span><br><span class="language-javascript"><span class="language-xml">    &#125;</span></span><br><span class="language-javascript"><span class="language-xml">  &#125;</span></span><br><span class="language-javascript"><span class="language-xml"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br></code></pre></td></tr></table></figure>

<h4 id="watch"><a href="#watch" class="headerlink" title="watch"></a>watch</h4><p>监听单个</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> info = <span class="hljs-title function_">reactive</span>(&#123;<span class="hljs-attr">name</span>: <span class="hljs-string">&quot;why&quot;</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">18</span>&#125;);<br><br><span class="hljs-comment">// 1.侦听watch时,传入一个getter函数</span><br><span class="hljs-title function_">watch</span>(<span class="hljs-function">() =&gt;</span> info.<span class="hljs-property">name</span>, <span class="hljs-function">(<span class="hljs-params">newValue, oldValue</span>) =&gt;</span> &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;newValue:&quot;</span>, newValue, <span class="hljs-string">&quot;oldValue:&quot;</span>, oldValue);<br>&#125;)<br><br>    <span class="hljs-comment">// 2.传入一个可响应式对象: reactive对象/ref对象</span><br>    <span class="hljs-comment">// 情况一: reactive对象获取到的newValue和oldValue本身都是reactive对象</span><br>    <span class="hljs-comment">// watch(info, (newValue, oldValue) =&gt; &#123;</span><br>    <span class="hljs-comment">//   console.log(&quot;newValue:&quot;, newValue, &quot;oldValue:&quot;, oldValue);</span><br>    <span class="hljs-comment">// &#125;)</span><br>    <span class="hljs-comment">// 如果希望newValue和oldValue是一个普通的对象 &#123;...info&#125; 解构</span><br>    <span class="hljs-title function_">watch</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>        <span class="hljs-keyword">return</span> &#123;...info&#125;<br>    &#125;, <span class="hljs-function">(<span class="hljs-params">newValue, oldValue</span>) =&gt;</span> &#123;<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;newValue:&quot;</span>, newValue, <span class="hljs-string">&quot;oldValue:&quot;</span>, oldValue);<br>    &#125;)<br>    <span class="hljs-comment">// 情况二: ref对象获取newValue和oldValue是value值的本身</span><br>    <span class="hljs-comment">// const time = ref(&quot;why&quot;);</span><br>    <span class="hljs-comment">// watch(time, (newValue, oldValue) =&gt; &#123;</span><br>    <span class="hljs-comment">//   console.log(&quot;newValue:&quot;, newValue, &quot;oldValue:&quot;, oldValue);</span><br>    <span class="hljs-comment">// &#125;)</span><br><br>    <span class="hljs-keyword">const</span> <span class="hljs-title function_">changeData</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br>    info.<span class="hljs-property">name</span> = <span class="hljs-string">&quot;kobe&quot;</span>;<br>    info.<span class="hljs-property">age</span>++<br>        <span class="hljs-comment">// time.value = &quot;Wusu&quot;</span><br>&#125;<br><br><span class="hljs-keyword">return</span> &#123;<br>    changeData,<br>    info,<br>    <span class="hljs-comment">// time</span><br>&#125;<br></code></pre></td></tr></table></figure>

<p>监听多个</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// 1.定义可响应式的对象</span><br><span class="hljs-keyword">const</span> info = <span class="hljs-title function_">reactive</span>(&#123;<span class="hljs-attr">name</span>: <span class="hljs-string">&quot;why&quot;</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">18</span>&#125;);<br><span class="hljs-keyword">const</span> name = <span class="hljs-title function_">ref</span>(<span class="hljs-string">&quot;why&quot;</span>);<br><span class="hljs-keyword">const</span> title = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">null</span>)<br><span class="hljs-comment">// 2.侦听器watch</span><br><span class="hljs-comment">// watch([() =&gt; (&#123;...info&#125;), name,title], ([newInfo, newName,newTit],[oldInfo, oldName,oldTit]) =&gt; &#123;</span><br><span class="hljs-comment">//   // console.log(a,b) a =&gt; newV ; b =&gt; oldV</span><br><span class="hljs-comment">//   console.log(newInfo, newName, oldInfo, oldName);</span><br><span class="hljs-comment">//   console.log(newTit,oldTit)</span><br><span class="hljs-comment">// &#125;,&#123;</span><br><span class="hljs-comment">//   // deep:true,</span><br><span class="hljs-comment">//   // immediate:true,</span><br><span class="hljs-comment">//   flush:&quot;post&quot;</span><br><span class="hljs-comment">// &#125;)</span><br><br><span class="hljs-title function_">watch</span>([<span class="hljs-function">() =&gt;</span> (&#123;...info&#125;), name,title], <span class="hljs-function">(<span class="hljs-params">a,b</span>) =&gt;</span> &#123;<br>    <span class="hljs-comment">// console.log(a,b) a =&gt; newV ; b =&gt; oldV</span><br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(a,b)<br>&#125;,&#123;<br>    <span class="hljs-comment">// deep:true,</span><br>    <span class="hljs-comment">// immediate:true,</span><br>    <span class="hljs-attr">flush</span>:<span class="hljs-string">&quot;post&quot;</span><br>&#125;)<br><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">changeData</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br>    info.<span class="hljs-property">name</span> = <span class="hljs-string">&quot;kobe&quot;</span>;<br>&#125;<br><br><span class="hljs-keyword">return</span> &#123;<br>    changeData,<br>    info,<br>    title<br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="生命周期"><a href="#生命周期" class="headerlink" title="生命周期"></a>生命周期</h4><p>&#x2F;&#x2F; 在选项式api里卸载时与vue2有所改变 </p>
<p>&#x2F;&#x2F; compositionApi 里 均有所不同 </p>
<table>
<thead>
<tr>
<th>选项式Api</th>
<th>compositionApi</th>
</tr>
</thead>
<tbody><tr>
<td>beforeCreate</td>
<td>setup()</td>
</tr>
<tr>
<td>created</td>
<td>setup()</td>
</tr>
<tr>
<td>beforeMount</td>
<td>onBeforeMount</td>
</tr>
<tr>
<td>mounted</td>
<td>onMounted</td>
</tr>
<tr>
<td>beforeUpdate</td>
<td>onBeforeUpdated</td>
</tr>
<tr>
<td>updated</td>
<td>onUpdated</td>
</tr>
<tr>
<td>beforeUnmount</td>
<td>onBeforeUnmount</td>
</tr>
<tr>
<td>unmounted</td>
<td>onUnmounted</td>
</tr>
<tr>
<td>activated</td>
<td>onActivated</td>
</tr>
<tr>
<td>deactivated</td>
<td>onDeactivated</td>
</tr>
</tbody></table>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-title function_">setup</span>(<span class="hljs-params"></span>) &#123;<br>   <span class="hljs-keyword">const</span> counter = <span class="hljs-title function_">ref</span>(<span class="hljs-number">0</span>);<br>   <span class="hljs-keyword">const</span> <span class="hljs-title function_">increment</span> = (<span class="hljs-params"></span>) =&gt; counter.<span class="hljs-property">value</span>++;<br><br>    <span class="hljs-comment">// 都会触发</span><br>   <span class="hljs-title function_">onMounted</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>     <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;App Mounted1&quot;</span>);<br>   &#125;);<br>   <span class="hljs-title function_">onMounted</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>     <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;App Mounted2&quot;</span>);<br>   &#125;);<br>   <span class="hljs-comment">// ---------</span><br>   <span class="hljs-title function_">onUpdated</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>     <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;App onUpdated&quot;</span>);<br>   &#125;);<br>   <span class="hljs-title function_">onUnmounted</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>     <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;App onUnmounted&quot;</span>);<br>   &#125;);<br><br>   <span class="hljs-keyword">return</span> &#123;<br>     counter,<br>     increment,<br>   &#125;;<br> &#125;,<br> <span class="hljs-title function_">mounted</span>(<span class="hljs-params"></span>)&#123;<br>     <span class="hljs-comment">// 也会触发</span><br>     <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;@2333&quot;</span>) <span class="hljs-comment">// @2333</span><br> &#125;<br></code></pre></td></tr></table></figure>



<h4 id="provide-x2F-inject"><a href="#provide-x2F-inject" class="headerlink" title="provide&#x2F;inject"></a>provide&#x2F;inject</h4><p>都可以改变provide的数据 但是不建议这样子更改 一般会传递 readonly()的数据 保证单向数据流</p>
<p>通过共享provide方法来改变数据</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs javascript">&lt;template&gt;<br>  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">      子组件  </span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">home</span>/&gt;</span></span><br><span class="language-xml">    --&gt; 父组件</span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>App Counter: &#123;&#123;counter&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;increment&quot;</span>&gt;</span>App中的+1<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>&lt;/template&gt;<br><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="language-javascript"><span class="language-xml">  <span class="hljs-keyword">import</span> &#123; provide, ref, readonly &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span>;</span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml">  <span class="hljs-keyword">import</span> <span class="hljs-title class_">Home</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./Home.vue&#x27;</span>;</span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml">  <span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;</span></span><br><span class="language-javascript"><span class="language-xml">    <span class="hljs-attr">components</span>: &#123;</span></span><br><span class="language-javascript"><span class="language-xml">      <span class="hljs-title class_">Home</span></span></span><br><span class="language-javascript"><span class="language-xml">    &#125;,</span></span><br><span class="language-javascript"><span class="language-xml">    <span class="hljs-title function_">setup</span>(<span class="hljs-params"></span>) &#123;</span></span><br><span class="language-javascript"><span class="language-xml">      <span class="hljs-keyword">const</span> name = <span class="hljs-title function_">ref</span>(<span class="hljs-string">&quot;coderwhy&quot;</span>);</span></span><br><span class="language-javascript"><span class="language-xml">      <span class="hljs-keyword">let</span> counter = <span class="hljs-title function_">ref</span>(<span class="hljs-number">100</span>);</span></span><br><span class="language-javascript"><span class="language-xml">	</span></span><br><span class="language-javascript"><span class="language-xml">      <span class="hljs-comment">// 共享属性  </span></span></span><br><span class="language-javascript"><span class="language-xml">      <span class="hljs-title function_">provide</span>(<span class="hljs-string">&quot;name&quot;</span>, <span class="hljs-title function_">readonly</span>(name));</span></span><br><span class="language-javascript"><span class="language-xml">      <span class="hljs-title function_">provide</span>(<span class="hljs-string">&quot;counter&quot;</span>, <span class="hljs-title function_">readonly</span>(counter));</span></span><br><span class="language-javascript"><span class="language-xml">      <span class="hljs-comment">// 共享方法</span></span></span><br><span class="language-javascript"><span class="language-xml">      <span class="hljs-title function_">provide</span>(<span class="hljs-string">&quot;changeName&quot;</span>,<span class="hljs-function">(<span class="hljs-params">val</span>)=&gt;</span>&#123;</span></span><br><span class="language-javascript"><span class="language-xml">        name.<span class="hljs-property">value</span> = val;</span></span><br><span class="language-javascript"><span class="language-xml">      &#125;)</span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml">      <span class="hljs-keyword">const</span> <span class="hljs-title function_">increment</span> = (<span class="hljs-params"></span>) =&gt; counter.<span class="hljs-property">value</span>++;</span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml">      <span class="hljs-keyword">return</span> &#123;</span></span><br><span class="language-javascript"><span class="language-xml">        increment,</span></span><br><span class="language-javascript"><span class="language-xml">        counter</span></span><br><span class="language-javascript"><span class="language-xml">      &#125;</span></span><br><span class="language-javascript"><span class="language-xml">    &#125;</span></span><br><span class="language-javascript"><span class="language-xml">  &#125;</span></span><br><span class="language-javascript"><span class="language-xml"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br></code></pre></td></tr></table></figure>

<h4 id="Hooks"><a href="#Hooks" class="headerlink" title="Hooks"></a>Hooks</h4><p>代码逻辑拆分</p>
<p>App.vue</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> &#123; ref, computed &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;vue&quot;</span>;<br><br><span class="hljs-keyword">import</span> &#123;<br>  useCounter,<br>  useLocalStorage,<br>  useMousePosition,<br>  useScrollPosition,<br>  useTitle,<br>&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./hooks&quot;</span>;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;<br>  <span class="hljs-title function_">setup</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">const</span> &#123; num, doubbleNum, obj, addNum, delNum &#125; = <span class="hljs-title function_">useCounter</span>();<br><br>    <span class="hljs-keyword">const</span> titleCon = <span class="hljs-title function_">useTitle</span>(<span class="hljs-string">&quot;变身tit&quot;</span>);<br><br>    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>      titleCon.<span class="hljs-property">value</span> = <span class="hljs-string">&quot;WuSu&quot;</span>;<br>    &#125;, <span class="hljs-number">2000</span>);<br><br>    <span class="hljs-keyword">const</span> &#123; scrollX, scrollY &#125; = <span class="hljs-title function_">useScrollPosition</span>();<br><br>    <span class="hljs-keyword">const</span> &#123; mouseX, mouseY &#125; = <span class="hljs-title function_">useMousePosition</span>();<br><br>    <span class="hljs-keyword">const</span> &#123; data &#125; = <span class="hljs-title function_">useLocalStorage</span>(<span class="hljs-string">&quot;name&quot;</span>, &#123; <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;abd&quot;</span>, <span class="hljs-attr">age</span>: <span class="hljs-string">&quot;19&quot;</span> &#125;);<br><br>    <span class="hljs-keyword">const</span> <span class="hljs-title function_">changeData</span> = (<span class="hljs-params"></span>) =&gt; (data.<span class="hljs-property">value</span> = <span class="hljs-string">&quot;csssss&quot;</span>);<br><br>    <span class="hljs-keyword">return</span> &#123;<br>      num, doubbleNum,obj,addNum,delNum,<br><br>      titleCon,<br><br>      scrollX,scrollY,<br><br>      mouseX, mouseY,<br><br>      data,changeData,<br>    &#125;;<br>  &#125;,<br>&#125;;<br></code></pre></td></tr></table></figure>

<p>hooks.js</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> useCounter <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./useCounter&#x27;</span>;<br><span class="hljs-keyword">import</span> useTitle <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./useTitle&#x27;</span>;<br><span class="hljs-keyword">import</span> useScrollPosition <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./useScrollPosition&#x27;</span>;<br><span class="hljs-keyword">import</span> useMousePosition <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./useMousePosition&#x27;</span>;<br><span class="hljs-keyword">import</span> useLocalStorage <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./useLocalStorage&#x27;</span>;<br><br><span class="hljs-keyword">export</span> &#123;<br>  useCounter,<br>  useTitle,<br>  useScrollPosition,<br>  useMousePosition,<br>  useLocalStorage<br>&#125;<br></code></pre></td></tr></table></figure>

<p>useCounter.js</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> &#123; ref, computed &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;vue&quot;</span><br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">const</span> num = <span class="hljs-title function_">ref</span>(<span class="hljs-number">12</span>);<br>  <span class="hljs-keyword">const</span> doubbleNum = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> num.<span class="hljs-property">value</span> * <span class="hljs-number">2</span>)<br><br>  <span class="hljs-keyword">const</span> <span class="hljs-title function_">addNum</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br>    num.<span class="hljs-property">value</span> += <span class="hljs-number">1</span><br>  &#125;<br><br>  <span class="hljs-keyword">const</span> <span class="hljs-title function_">delNum</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br>    num.<span class="hljs-property">value</span> += -<span class="hljs-number">1</span><br>  &#125;<br><br>  <span class="hljs-keyword">const</span> obj = &#123;<br>    <span class="hljs-attr">a</span>:<span class="hljs-string">&#x27;1&#x27;</span>,<br>    <span class="hljs-attr">b</span>:<span class="hljs-string">&#x27;2&#x27;</span>,<br>  &#125;<br><br>  <span class="hljs-keyword">return</span> &#123;<br>    num,<br>    doubbleNum,<br>    obj,<br>    addNum,<br>    delNum<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="render-h函数"><a href="#render-h函数" class="headerlink" title="render h函数"></a>render h函数</h4><p>基本使用</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> &#123; h &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span>;<br><br> <span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;<br>   <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>     <span class="hljs-keyword">return</span> <span class="hljs-title function_">h</span>(<span class="hljs-string">&quot;h2&quot;</span>,&#123;<span class="hljs-attr">class</span>:<span class="hljs-string">&quot;123321 aaa&quot;</span>&#125;,<span class="hljs-string">&quot;XIXIHAHA&quot;</span>)<br>   &#125;<br> &#125;<br></code></pre></td></tr></table></figure>

<h4 id="JSX"><a href="#JSX" class="headerlink" title="JSX"></a>JSX</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">const</span> <span class="hljs-title function_">increment</span> = (<span class="hljs-params"></span>) =&gt; <span class="hljs-variable language_">this</span>.<span class="hljs-property">counter</span>++;<br>    <span class="hljs-keyword">const</span> <span class="hljs-title function_">decrement</span> = (<span class="hljs-params"></span>) =&gt; <span class="hljs-variable language_">this</span>.<span class="hljs-property">counter</span>--;<br><br>    <span class="hljs-keyword">return</span> (<br>        <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>当前计数: &#123;this.counter&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;increment&#125;</span>&gt;</span>+1<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;decrement&#125;</span>&gt;</span>-1<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">HelloWorld</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">HelloWorld</span>&gt;</span></span><br><span class="language-xml">    	<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>    )<br>&#125;<br></code></pre></td></tr></table></figure>

<p>可以在return里的东西  比较灵活 组件库用的比较多 直接div里写js</p>
<h4 id="自定义指令（Vue3）"><a href="#自定义指令（Vue3）" class="headerlink" title="自定义指令（Vue3）"></a>自定义指令（Vue3）</h4><p>局部注册</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-attr">directives</span>:&#123;<br>    <span class="hljs-attr">focus</span>:&#123;<br>        <span class="hljs-title function_">mounted</span>(<span class="hljs-params">el,binding,vnode,prenode</span>) &#123;<br>          el.<span class="hljs-title function_">focus</span>()<br>        &#125;,<br>    &#125;,<br>&#125;  <br></code></pre></td></tr></table></figure>

<p>指令的钩子会传递以下几种参数：</p>
<ul>
<li><code>el</code>：指令绑定到的元素。这可以用于直接操作 DOM。</li>
<li><code>binding</code>：一个对象，包含以下属性。<ul>
<li><code>value</code>：传递给指令的值。例如在 <code>v-my-directive=&quot;1 + 1&quot;</code> 中，值是 <code>2</code>。</li>
<li><code>oldValue</code>：之前的值，仅在 <code>beforeUpdate</code> 和 <code>updated</code> 中可用。无论值是否更改，它都可用。</li>
<li><code>arg</code>：传递给指令的参数 (如果有的话)。例如在 <code>v-my-directive:foo</code> 中，参数是 <code>&quot;foo&quot;</code>。</li>
<li><code>modifiers</code>：一个包含修饰符的对象 (如果有的话)。例如在 <code>v-my-directive.foo.bar</code> 中，修饰符对象是 <code>&#123; foo: true, bar: true &#125;</code>。</li>
<li><code>instance</code>：使用该指令的组件实例。</li>
<li><code>dir</code>：指令的定义对象。</li>
</ul>
</li>
<li><code>vnode</code>：代表绑定元素的底层 VNode。</li>
<li><code>prevNode</code>：之前的渲染中代表指令所绑定元素的 VNode。仅在 <code>beforeUpdate</code> 和 <code>updated</code> 钩子中可用。</li>
</ul>
<p>生命周期</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// Data加载完成后</span><br><span class="hljs-title function_">created</span>(<span class="hljs-params"></span>) &#123;<br>    <br>&#125;,<br><span class="hljs-comment">// Dom挂载前后</span><br><span class="hljs-title function_">beforeMount</span>(<span class="hljs-params"></span>) &#123;<br>  	<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;why beforeMount&quot;</span>);<br>&#125;,<br><span class="hljs-title function_">mounted</span>(<span class="hljs-params"></span>) &#123;<br>	<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;why mounted&quot;</span>);<br>&#125;,<br><span class="hljs-comment">// 状态更新</span><br><span class="hljs-title function_">beforeUpdate</span>(<span class="hljs-params"></span>) &#123;<br>	<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;why beforeUpdate&quot;</span>);<br>&#125;,<br><span class="hljs-title function_">updated</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;why updated&quot;</span>);<br>&#125;,<br><span class="hljs-comment">// 消失解除事件绑定</span><br><span class="hljs-title function_">beforeUnmount</span>(<span class="hljs-params"></span>) &#123;<br>	<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;why beforeUnmount&quot;</span>);<br>&#125;,<br><span class="hljs-title function_">unmounted</span>(<span class="hljs-params"></span>) &#123;<br>	<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;why unmounted&quot;</span>);<br>&#125;<br></code></pre></td></tr></table></figure>

<p>案例：</p>
<p>&#x2F;&#x2F; format-time</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// 外部时间库</span><br><span class="hljs-keyword">import</span> dayjs <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;dayjs&#x27;</span>;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span>(<span class="hljs-params">app</span>) &#123;<br>  app.<span class="hljs-title function_">directive</span>(<span class="hljs-string">&quot;format-time&quot;</span>, &#123;<br>    <span class="hljs-title function_">created</span>(<span class="hljs-params">el, bindings</span>) &#123;<br>      bindings.<span class="hljs-property">formatString</span> = <span class="hljs-string">&quot;YYYY-MM-DD HH:mm:ss&quot;</span>;<br>      <span class="hljs-keyword">if</span> (bindings.<span class="hljs-property">value</span>) &#123;<br>        bindings.<span class="hljs-property">formatString</span> = bindings.<span class="hljs-property">value</span>;<br>      &#125;<br>    &#125;,<br>    <span class="hljs-title function_">mounted</span>(<span class="hljs-params">el, bindings</span>) &#123;<br>      <span class="hljs-keyword">const</span> textContent = el.<span class="hljs-property">textContent</span>;<br>      <span class="hljs-keyword">let</span> timestamp = <span class="hljs-built_in">parseInt</span>(textContent);<br>      <span class="hljs-keyword">if</span> (textContent.<span class="hljs-property">length</span> === <span class="hljs-number">10</span>) &#123;<br>        timestamp = timestamp * <span class="hljs-number">1000</span><br>      &#125;<br>      el.<span class="hljs-property">textContent</span> = <span class="hljs-title function_">dayjs</span>(timestamp).<span class="hljs-title function_">format</span>(bindings.<span class="hljs-property">formatString</span>);<br>    &#125;<br>  &#125;)<br>&#125;<br></code></pre></td></tr></table></figure>

<p>&#x2F;&#x2F; directives.js</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> registerFormatTime <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./format-time&#x27;</span>;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">registerDirectives</span>(<span class="hljs-params">app</span>) &#123;<br>  <span class="hljs-title function_">registerFormatTime</span>(app);<br>&#125;<br></code></pre></td></tr></table></figure>

<p>&#x2F;&#x2F; main.js</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> registerDirectives <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./directives&#x27;</span><br><span class="hljs-title function_">registerDirectives</span>(app);<br></code></pre></td></tr></table></figure>

<h4 id="teleport"><a href="#teleport" class="headerlink" title="teleport"></a>teleport</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs javascript">&lt;template&gt;<br>  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">teleport</span> <span class="hljs-attr">to</span>=<span class="hljs-string">&quot;#why&quot;</span>&gt;</span> // 将下列元素加入到 id为why的div中去 ==&gt; 必须得有id为why的Div</span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>当前计数<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">button</span>&gt;</span>+1<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">hello-world</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">hello-world</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">teleport</span>&gt;</span></span><br><span class="language-xml"></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">teleport</span> <span class="hljs-attr">to</span>=<span class="hljs-string">&quot;body&quot;</span>&gt;</span> // 将该元素加到body末尾</span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>呵呵呵呵<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">teleport</span>&gt;</span></span><br><span class="language-xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>&lt;/template&gt;<br></code></pre></td></tr></table></figure>

<h4 id="plugins"><a href="#plugins" class="headerlink" title="plugins"></a>plugins</h4><p>插件</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// main.js</span><br><span class="hljs-keyword">import</span> pluginObject <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./plugins/plugins_object&#x27;</span><br><br><span class="hljs-keyword">const</span> app = <span class="hljs-title function_">createApp</span>(<span class="hljs-title class_">App</span>);<br><br>app.<span class="hljs-title function_">use</span>(pluginObject);<br></code></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;<br>  <span class="hljs-title function_">install</span>(<span class="hljs-params">app</span>) &#123;<br>    app.<span class="hljs-property">config</span>.<span class="hljs-property">globalProperties</span>.<span class="hljs-property">$name</span> = <span class="hljs-string">&quot;coderwhy&quot;</span><br>  &#125;<br>&#125;<br><br><span class="hljs-comment">// 如何拿到config里的值</span><br><span class="hljs-keyword">import</span> &#123; getCurrentInstance &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;vue&quot;</span>;<br><span class="hljs-title function_">setup</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">const</span> instance = <span class="hljs-title function_">getCurrentInstance</span>();<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(instance.<span class="hljs-property">appContext</span>.<span class="hljs-property">config</span>.<span class="hljs-property">globalProperties</span>.<span class="hljs-property">$name</span>)<span class="hljs-comment">// coderwhy</span><br>&#125;,<br></code></pre></td></tr></table></figure>

<h4 id="mini-vue"><a href="#mini-vue" class="headerlink" title="mini-vue"></a>mini-vue</h4><h5 id="render-js-渲染器"><a href="#render-js-渲染器" class="headerlink" title="render.js 渲染器"></a>render.js 渲染器</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">h</span> = (<span class="hljs-params">tag, props, children</span>) =&gt; &#123;<br>  <span class="hljs-keyword">return</span> &#123;<br>    tag,<br>    props,<br>    children,<br>  &#125;<br>&#125;<br><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">mount</span> = (<span class="hljs-params">vnode, container</span>) =&gt; &#123;<br>  <span class="hljs-comment">// vnode -&gt; dom</span><br>  <span class="hljs-keyword">const</span> el = vnode.<span class="hljs-property">el</span> = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(vnode.<span class="hljs-property">tag</span>);<br><br>  <span class="hljs-comment">// 添加 属性 or 方法</span><br>  <span class="hljs-keyword">if</span> (vnode.<span class="hljs-property">props</span>) &#123;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> key <span class="hljs-keyword">in</span> vnode.<span class="hljs-property">props</span>) &#123;<br>      <span class="hljs-keyword">const</span> value = vnode.<span class="hljs-property">props</span>[key];<br>      <br>      <span class="hljs-comment">// console.log(key, value)</span><br>      <span class="hljs-keyword">if</span> (key.<span class="hljs-title function_">startsWith</span>(<span class="hljs-string">&#x27;on&#x27;</span>)) &#123;<br>        el.<span class="hljs-title function_">addEventListener</span>(key.<span class="hljs-title function_">slice</span>(<span class="hljs-number">2</span>).<span class="hljs-title function_">toLocaleLowerCase</span>(), value)<br>      &#125; <span class="hljs-keyword">else</span> &#123;<br>        el.<span class="hljs-title function_">setAttribute</span>(key, value)<br>      &#125;<br>    &#125;<br>  &#125;<br><br>  <span class="hljs-comment">// vnode的子节点添加</span><br>  <span class="hljs-keyword">if</span> (vnode.<span class="hljs-property">children</span>) &#123;<br>    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> vnode.<span class="hljs-property">children</span> === <span class="hljs-string">&quot;string&quot;</span>) &#123;<br>      el.<span class="hljs-property">textContent</span> = vnode.<span class="hljs-property">children</span><br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>      vnode.<span class="hljs-property">children</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> &#123;<br>        <span class="hljs-title function_">mount</span>(item, el)<br>      &#125;);<br>    &#125;<br>  &#125;<br><br>  <span class="hljs-comment">// 添加el到父节点</span><br>  container.<span class="hljs-title function_">appendChild</span>(el);<br>&#125;<br><br><span class="hljs-comment">// diff算法函数</span><br><span class="hljs-comment">/*</span><br><span class="hljs-comment">  n1 oldVnode</span><br><span class="hljs-comment">  n2 newVnode</span><br><span class="hljs-comment">*/</span><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">patch</span> = (<span class="hljs-params">n1, n2</span>) =&gt; &#123;<br>  <span class="hljs-comment">// 新增</span><br>  <span class="hljs-keyword">if</span> (n1.<span class="hljs-property">tag</span> !== n2.<span class="hljs-property">tag</span>) &#123;<br>    <span class="hljs-keyword">const</span> parElement = n1.<span class="hljs-property">el</span>.<span class="hljs-property">parentElement</span>;<br>    parElement.<span class="hljs-title function_">removeChild</span>(n1.<span class="hljs-property">el</span>)<br>    <span class="hljs-title function_">mount</span>(n2, parElement)<br>  &#125; <span class="hljs-keyword">else</span> &#123;<br>    <span class="hljs-keyword">const</span> el = n2.<span class="hljs-property">el</span> = n1.<span class="hljs-property">el</span>;<br><br>    <span class="hljs-keyword">const</span> oldProps = n1.<span class="hljs-property">props</span> || &#123;&#125;;<br>    <span class="hljs-keyword">const</span> newProps = n2.<span class="hljs-property">props</span> || &#123;&#125;;<br><br>    <span class="hljs-comment">// 改变或者新增props</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> key <span class="hljs-keyword">in</span> newProps) &#123;<br><br>      <span class="hljs-keyword">const</span> newValue = newProps[key];<br>      <span class="hljs-keyword">const</span> oldValue = oldProps[key];<br><br>      <span class="hljs-keyword">if</span> (newValue !== oldValue) &#123;<br>        <span class="hljs-keyword">if</span> (key.<span class="hljs-title function_">startsWith</span>(<span class="hljs-string">&#x27;on&#x27;</span>)) &#123;<br>          el.<span class="hljs-title function_">addEventListener</span>(key.<span class="hljs-title function_">slice</span>(<span class="hljs-number">2</span>).<span class="hljs-title function_">toLocaleLowerCase</span>(), newValue)<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>          el.<span class="hljs-title function_">setAttribute</span>(key, newValue)<br>        &#125;<br>      &#125;<br>    &#125;<br>    <span class="hljs-comment">// 删除props的</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> key <span class="hljs-keyword">in</span> oldProps) &#123;<br>        <span class="hljs-keyword">if</span> (key.<span class="hljs-title function_">startsWith</span>(<span class="hljs-string">&quot;on&quot;</span>)) &#123;<br>          <span class="hljs-keyword">const</span> value = oldProps[key];<br>          el.<span class="hljs-title function_">removeEventListener</span>(key.<span class="hljs-title function_">slice</span>(<span class="hljs-number">2</span>).<span class="hljs-title function_">toLocaleLowerCase</span>(), value)<br>        &#125; <br>        <span class="hljs-keyword">if</span> (!(key <span class="hljs-keyword">in</span> newProps)) &#123;<br>          el.<span class="hljs-title function_">removeAttribute</span>(key)<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-comment">// 处理children</span><br>    <span class="hljs-keyword">const</span> oldChildren = n1.<span class="hljs-property">children</span> || &#123;&#125;;<br>    <span class="hljs-keyword">const</span> newChildren = n2.<span class="hljs-property">children</span> || &#123;&#125;;<br><br>    <span class="hljs-comment">// 新child为字符串</span><br>    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> newChildren === <span class="hljs-string">&#x27;string&#x27;</span>) &#123;<br>      <span class="hljs-comment">// 旧的也是字符串</span><br>      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> oldChildren === <span class="hljs-string">&#x27;string&#x27;</span>) &#123;<br>        el.<span class="hljs-property">textContent</span> = newChildren;<br>      &#125; <span class="hljs-keyword">else</span> &#123;<br>        el.<span class="hljs-property">innerHTML</span> = newChildren;<br>      &#125;<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> oldChildren === <span class="hljs-string">&#x27;string&#x27;</span>) &#123;<br>        el.<span class="hljs-property">innerHTML</span> = <span class="hljs-string">&#x27;&#x27;</span>;<br>        newChildren.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> &#123;<br>          <span class="hljs-title function_">mount</span>(item, el)<br>        &#125;)<br>      &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-comment">// 按位对比</span><br>        <span class="hljs-comment">// 给大聪明自己以后看的：patch这步过后会直接比较完共有的的 多的或者少的走后面的判断;</span><br>        <span class="hljs-comment">// vue在没有key的情况的笨办法 硬判断 拿完一样的后新的多就加 旧的多就删掉</span><br>        <span class="hljs-keyword">const</span> minLength = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(oldChildren.<span class="hljs-property">length</span>, newChildren.<span class="hljs-property">length</span>);<br>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; minLength; i++) &#123;<br>          <span class="hljs-title function_">patch</span>(oldChildren[i], newChildren[i])<br>        &#125;<br><br>        <span class="hljs-comment">// new节点数据多 多遍历</span><br>        <span class="hljs-keyword">if</span> (newChildren.<span class="hljs-property">length</span> &gt; oldChildren.<span class="hljs-property">length</span>) &#123;<br>          newChildren.<span class="hljs-title function_">slice</span>(oldChildren.<span class="hljs-property">length</span>).<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> &#123;<br>            <span class="hljs-title function_">mount</span>(item, el)<br>          &#125;)<br>        &#125;<br>        <span class="hljs-comment">// 循环完成后 如果是old节点数据多 则去除多出来的</span><br>        <span class="hljs-keyword">if</span> (oldChildren.<span class="hljs-property">length</span> &gt; newChildren.<span class="hljs-property">length</span>) &#123;<br>          oldChildren.<span class="hljs-title function_">slice</span>(newChildren.<span class="hljs-property">length</span>).<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> &#123;<br>            el.<span class="hljs-title function_">removeChild</span>(item.<span class="hljs-property">el</span>)<br>          &#125;)<br>        &#125;<br>      &#125;<br>    &#125;<br>  &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure>

<h5 id="reactive-js-响应式"><a href="#reactive-js-响应式" class="headerlink" title="reactive.js 响应式"></a>reactive.js 响应式</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Dep</span> &#123;<br>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">subscribers</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>();<br>  &#125;<br><br>  <span class="hljs-title function_">depend</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">if</span> (activeEffect) &#123;<br>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">subscribers</span>.<span class="hljs-title function_">add</span>(activeEffect);<br>    &#125;<br>  &#125;<br><br>  <span class="hljs-title function_">notify</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">subscribers</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">effect</span> =&gt;</span> &#123;<br>      <span class="hljs-title function_">effect</span>();<br>    &#125;)<br>  &#125;<br>&#125;<br><br><span class="hljs-keyword">let</span> activeEffect = <span class="hljs-literal">null</span>;<br><span class="hljs-keyword">function</span> <span class="hljs-title function_">watchEffect</span>(<span class="hljs-params">effect</span>) &#123;<br>  activeEffect = effect;<br>  <span class="hljs-title function_">effect</span>();<br>  activeEffect = <span class="hljs-literal">null</span>;<br>&#125;<br><br><br><span class="hljs-comment">// Map(&#123;key: value&#125;): key是一个字符串</span><br><span class="hljs-comment">// WeakMap(&#123;key(对象): value&#125;): key是一个对象, 弱引用</span><br><span class="hljs-keyword">const</span> targetMap = <span class="hljs-keyword">new</span> <span class="hljs-title class_">WeakMap</span>();<br><span class="hljs-keyword">function</span> <span class="hljs-title function_">getDep</span>(<span class="hljs-params">target, key</span>) &#123;<br>  <span class="hljs-comment">// 1.根据对象(target)取出对应的Map对象</span><br>  <span class="hljs-keyword">let</span> depsMap = targetMap.<span class="hljs-title function_">get</span>(target);<br>  <span class="hljs-keyword">if</span> (!depsMap) &#123;<br>    depsMap = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>();<br>    targetMap.<span class="hljs-title function_">set</span>(target, depsMap);<br>  &#125;<br><br>  <span class="hljs-comment">// 2.取出具体的dep对象</span><br>  <span class="hljs-keyword">let</span> dep = depsMap.<span class="hljs-title function_">get</span>(key);<br>  <span class="hljs-keyword">if</span> (!dep) &#123;<br>    dep = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Dep</span>();<br>    depsMap.<span class="hljs-title function_">set</span>(key, dep);<br>  &#125;<br>  <span class="hljs-keyword">return</span> dep;<br>&#125;<br><br><br><span class="hljs-comment">// vue3对raw进行数据劫持</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">reactive</span>(<span class="hljs-params">raw</span>) &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Proxy</span>(raw, &#123;<br>    <span class="hljs-title function_">get</span>(<span class="hljs-params">target, key</span>) &#123;<br>      <span class="hljs-comment">// console.log(target,key) // &#123; counter: 0, num: 20 &#125;,&#x27;counter&#x27; </span><br>      <span class="hljs-keyword">const</span> dep = <span class="hljs-title function_">getDep</span>(target, key);<br>      dep.<span class="hljs-title function_">depend</span>();<br>      <span class="hljs-keyword">return</span> target[key];<br>    &#125;,<br>    <span class="hljs-title function_">set</span>(<span class="hljs-params">target, key, newValue</span>) &#123;<br>      <span class="hljs-comment">// console.log(target, key, newValue) //&#123; counter: 2, num: 20 &#125; &#x27;counter&#x27; 3</span><br>      <span class="hljs-keyword">const</span> dep = <span class="hljs-title function_">getDep</span>(target, key);<br>      target[key] = newValue;<br>      dep.<span class="hljs-title function_">notify</span>();<br>    &#125;<br>  &#125;)<br>&#125;<br><br><span class="hljs-comment">// vue2对raw进行数据劫持</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">reactive</span>(<span class="hljs-params">raw</span>) &#123;<br>  <span class="hljs-comment">// 遍历传入的对象的key </span><br>  <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(raw).<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">key</span> =&gt;</span> &#123;<br>    <span class="hljs-comment">// dep对象</span><br>    <span class="hljs-keyword">const</span> dep = <span class="hljs-title function_">getDep</span>(raw, key);<br>    <span class="hljs-comment">// value</span><br>    <span class="hljs-keyword">let</span> value = raw[key];<br><br>    <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">defineProperty</span>(raw, key, &#123;<br>      <span class="hljs-title function_">get</span>(<span class="hljs-params"></span>) &#123;<br>        dep.<span class="hljs-title function_">depend</span>();<br>        <span class="hljs-keyword">return</span> value;<br>      &#125;,<br>      <span class="hljs-title function_">set</span>(<span class="hljs-params">newValue</span>) &#123;<br>        <span class="hljs-keyword">if</span> (value !== newValue) &#123;<br>          value = newValue;<br>          dep.<span class="hljs-title function_">notify</span>();<br>        &#125;<br>      &#125;<br>    &#125;)<br>  &#125;)<br>  <span class="hljs-keyword">return</span> raw;<br>&#125;<br></code></pre></td></tr></table></figure>

<h5 id="index-js-挂载器"><a href="#index-js-挂载器" class="headerlink" title="index.js 挂载器"></a>index.js 挂载器</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">createApp</span>(<span class="hljs-params">rootComponent</span>) &#123;<br>  <span class="hljs-keyword">return</span> &#123;<br>    <span class="hljs-title function_">mount</span>(<span class="hljs-params">selector</span>) &#123;<br>      <span class="hljs-keyword">const</span> container = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(selector);<br>      <span class="hljs-keyword">let</span> isMounted = <span class="hljs-literal">false</span>;<br>      <span class="hljs-keyword">let</span> oldVNode = <span class="hljs-literal">null</span>;<br><br>      <span class="hljs-title function_">watchEffect</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-keyword">if</span> (!isMounted) &#123;<br>          oldVNode = rootComponent.<span class="hljs-title function_">render</span>();<br>          <span class="hljs-title function_">mount</span>(oldVNode, container);<br>          isMounted = <span class="hljs-literal">true</span>;<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>          <span class="hljs-keyword">const</span> newVNode = rootComponent.<span class="hljs-title function_">render</span>();<br>          <span class="hljs-title function_">patch</span>(oldVNode, newVNode);<br>          oldVNode = newVNode;<br>        &#125;<br>      &#125;)<br>    &#125;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<div id="paginator"></div></div><div id="post-footer"><div id="pages" style="justify-content: flex-start"><div class="footer-link" style="width: 50%;text-align:right;border-right:1px #fe2 solid"><a href="/2022/08/01/css_doodle/">← Next css_doodle</a></div></div></div></div><div class="bottom-btn"><div><a class="i-top" id="to-top" onClick="scrolls.scrolltop();" title="To Top" style="opacity: 0; display: none;">∧ </a><a class="i-index" id="to-index" href="#toc-div" title="To Catalog">≡</a></div></div></article><aside><div id="about"><a href="/" id="logo"><img src="https://ak.hypergryph.com/assets/index/images/ak/pc/faction/1.png" alt="Logo"></a><h1 id="Dr"><a href="/">Wusu</a></h1><div id="description"><p>Arknights</p></div><div id="social-links"><a class="social" target="_blank" rel="noopener" href="https://github.com/wusuzi"><i class="fab fa-github" alt="GitHub"></i></a><a class="social" target="_blank" rel="noopener" href="https://space.bilibili.com/91354030"><i class="fa-brands fa-bilibili" alt="BiliBili"></i></a></div></div><div id="aside-block"><div id="toc-div"><h1>Catalog</h1><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#Vue3-EventBus-mitt-%E4%BA%8B%E4%BB%B6%E6%80%BB%E7%BA%BF"><span class="toc-number">1.</span> <span class="toc-text">Vue3 EventBus mitt 事件总线</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%8B%E8%BD%BD"><span class="toc-number">1.1.</span> <span class="toc-text">下载</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AF%BC%E5%85%A5%EF%BC%9A"><span class="toc-number">1.2.</span> <span class="toc-text">导入：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8"><span class="toc-number">1.3.</span> <span class="toc-text">使用:</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%BB%91%E5%AE%9A"><span class="toc-number">1.3.1.</span> <span class="toc-text">绑定</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%A7%A6%E5%8F%91"><span class="toc-number">1.3.2.</span> <span class="toc-text">触发</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%8F%96%E6%B6%88%E7%9B%91%E5%90%AC"><span class="toc-number">1.3.3.</span> <span class="toc-text">取消监听</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Slot"><span class="toc-number">2.</span> <span class="toc-text">Slot</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8-1"><span class="toc-number">2.1.</span> <span class="toc-text">使用:</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8%EF%BC%9A"><span class="toc-number">2.1.1.</span> <span class="toc-text">基本使用：</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%8C%BF%E5%90%8D%E6%8F%92%E6%A7%BD"><span class="toc-number">2.1.1.1.</span> <span class="toc-text">匿名插槽</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%85%B7%E5%90%8D%E6%8F%92%E6%A7%BD"><span class="toc-number">2.1.1.2.</span> <span class="toc-text">具名插槽</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E4%BD%9C%E7%94%A8%E5%9F%9F%E6%8F%92%E6%A7%BD"><span class="toc-number">2.1.1.3.</span> <span class="toc-text">作用域插槽</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%84%E4%BB%B6"><span class="toc-number">3.</span> <span class="toc-text">组件</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8A%A8%E6%80%81%E7%BB%84%E4%BB%B6"><span class="toc-number">3.1.</span> <span class="toc-text">动态组件</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#keep-alive-x2F-component-x2F-%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="toc-number">3.1.1.</span> <span class="toc-text">keep-alive&#x2F;component&#x2F;生命周期</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BC%82%E6%AD%A5%E7%BB%84%E4%BB%B6"><span class="toc-number">3.2.</span> <span class="toc-text">异步组件</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Refs-vue3"><span class="toc-number">4.</span> <span class="toc-text">Refs(vue3)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%84%E4%BB%B6%E7%9A%84v-model"><span class="toc-number">5.</span> <span class="toc-text">组件的v-model</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Vue2%E7%9A%84%E5%86%99%E6%B3%95"><span class="toc-number">5.1.</span> <span class="toc-text">Vue2的写法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BB%A5%E4%B8%8B%E4%B8%BAVue3%E7%9A%84%E5%86%99%E6%B3%95"><span class="toc-number">5.2.</span> <span class="toc-text">以下为Vue3的写法</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8A%A8%E7%94%BB"><span class="toc-number">6.</span> <span class="toc-text">动画</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8"><span class="toc-number">6.1.</span> <span class="toc-text">基本使用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#gsap%E5%8A%A8%E7%94%BB%E5%BA%93"><span class="toc-number">6.2.</span> <span class="toc-text">gsap动画库</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Mixins-%E4%BB%A3%E7%A0%81%E5%A4%8D%E7%94%A8-%EF%BC%88%E5%85%B1%E4%BA%AB%EF%BC%89"><span class="toc-number">7.</span> <span class="toc-text">Mixins 代码复用 （共享）</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#extend-%E4%BA%86%E8%A7%A3"><span class="toc-number">7.1.</span> <span class="toc-text">extend(了解)</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#composition-API"><span class="toc-number">8.</span> <span class="toc-text">composition API</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%93%8D%E5%BA%94%E5%BC%8FAPI"><span class="toc-number">8.1.</span> <span class="toc-text">响应式API</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#reactiveAPI"><span class="toc-number">8.1.1.</span> <span class="toc-text">reactiveAPI</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#ref-API"><span class="toc-number">8.1.2.</span> <span class="toc-text">ref  API</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#readonly-API"><span class="toc-number">8.1.3.</span> <span class="toc-text">readonly API</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#API%E8%A1%A5%E5%85%85"><span class="toc-number">8.1.4.</span> <span class="toc-text">API补充</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Computed"><span class="toc-number">8.2.</span> <span class="toc-text">Computed</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#watchEffect"><span class="toc-number">8.3.</span> <span class="toc-text">watchEffect</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%81%9C%E6%AD%A2%E7%9B%91%E5%90%AC"><span class="toc-number">8.3.0.1.</span> <span class="toc-text">停止监听</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E6%B8%85%E6%A5%9A%E5%89%AF%E4%BD%9C%E7%94%A8"><span class="toc-number">8.3.0.2.</span> <span class="toc-text">清楚副作用</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#ref%E6%89%A7%E8%A1%8C%E6%97%B6%E6%9C%BA"><span class="toc-number">8.3.1.</span> <span class="toc-text">ref执行时机</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#watch"><span class="toc-number">8.4.</span> <span class="toc-text">watch</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="toc-number">8.5.</span> <span class="toc-text">生命周期</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#provide-x2F-inject"><span class="toc-number">8.6.</span> <span class="toc-text">provide&#x2F;inject</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Hooks"><span class="toc-number">8.7.</span> <span class="toc-text">Hooks</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#render-h%E5%87%BD%E6%95%B0"><span class="toc-number">8.8.</span> <span class="toc-text">render h函数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#JSX"><span class="toc-number">8.9.</span> <span class="toc-text">JSX</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8C%87%E4%BB%A4%EF%BC%88Vue3%EF%BC%89"><span class="toc-number">8.10.</span> <span class="toc-text">自定义指令（Vue3）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#teleport"><span class="toc-number">8.11.</span> <span class="toc-text">teleport</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#plugins"><span class="toc-number">8.12.</span> <span class="toc-text">plugins</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#mini-vue"><span class="toc-number">8.13.</span> <span class="toc-text">mini-vue</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#render-js-%E6%B8%B2%E6%9F%93%E5%99%A8"><span class="toc-number">8.13.1.</span> <span class="toc-text">render.js 渲染器</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#reactive-js-%E5%93%8D%E5%BA%94%E5%BC%8F"><span class="toc-number">8.13.2.</span> <span class="toc-text">reactive.js 响应式</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#index-js-%E6%8C%82%E8%BD%BD%E5%99%A8"><span class="toc-number">8.13.3.</span> <span class="toc-text">index.js 挂载器</span></a></li></ol></li></ol></li></ol></div></div><footer><nobr>Published with <a target="_blank" rel="noopener" href="http://hexo.io">Hexo</a></nobr><wbr><nobr> Theme <a target="_blank" rel="noopener" href="https://github.com/Yue-plus/hexo-theme-arknights">Arknights</a></nobr><wbr><nobr> by <a target="_blank" rel="noopener" href="https://github.com/Yue-plus">Yue_plus</a></nobr></footer></aside></main><canvas id="canvas-dust"></canvas><script src="/js/search.js"></script><script src="/js/arknights.js"></script><script src="//unpkg.com/lightgallery@2.7.1/lightgallery.min.js"></script><script src="//unpkg.com/lightgallery@2.7.1/plugins/zoom/lg-zoom.min.js"></script><script src="//unpkg.com/lightgallery@2.7.1/plugins/thumbnail/lg-thumbnail.min.js"></script><script class="pjax-js">reset= () => {document.querySelector('.lg-container')?.remove()
lightGallery(document.getElementById('post-bg'), {
  plugins: [lgZoom,lgThumbnail],
  selector: '.item-img'})}</script><script>window.addEventListener("load",() => {reset()})</script></body></html>